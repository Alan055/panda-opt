webpackJsonp([3,12,15,18],{"4n48":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),s=a("fZjL"),l=a.n(s),o=a("G0J2"),n=(a("fMLZ"),{name:"StartFigure",data:function(){var t=this;return{addPopText:"",addMaterialText:"",allactiveName:"1",andactiveName:"1",iosactiveName:"1",allDialogListParams:{pageSize:10,pageNum:1},andDialogListParams:{pageSize:10,pageNum:1},iosDialogListParams:{pageSize:10,pageNum:1},actionWidth:!0,bigImgUrlDialog:!1,canDrag:!0,imgPercent:0,loaded:!1,loading:!0,bigImgUrl:"",content:"",addMaterialRules:{icontext:[{required:!0,message:"请输入素材名称"}],jumptype:[{required:!0,message:"请选择打开方式"}]},pictureLimit:1,canEdit:!1,imageUrl:"",androidDialogList:[],iosDialogList:[],allDialogList:[],materialList:[],addMaterialListDialog:!1,addMaterialForm:{advertid:"",icontext:"",jumptype:"",jumplink:"",fileid:"",imgurl:""},defaultParams:{pageSize:10,pageNum:1},addPopupDialog:!1,addPopupForm:{oldIds:"",positionid:"",userstatus:"",starttime:"",devicetype:"",endtime:"",advertid:"",priority:"",frequency:"",advertList:[{advertid:"",jumplink:"",imgurl:""}]},addPopupFormRules:{jumptype:[{required:!0,message:"请选择跳转方式",trigger:"change"}],frequency:[{required:!0,message:"请选择弹窗频率",trigger:"change"}],userstatus:[{required:!0,message:"请选择用户状态",trigger:"change"}],devicetype:[{required:!0,message:"选择投放平台",trigger:"change"}],starttime:[{required:!0,message:"请选择开始时间"},{validator:function(e,a,i){""===a?i(new Error("请输入开始时间")):(""!==t.addPopupForm.endtime&&t.$refs.addPopupForm.validateField("endtime"),i())},trigger:"change"}],endtime:[{required:!0,message:"请选择结束时间"},{validator:function(e,a,i){""===a?i(new Error("请输入结束时间")):a<t.addPopupForm.starttime?i(new Error("结束时间不能小于开始时间!")):i()},trigger:"change"}]},checkedType:""}},components:{quillEditor:o.quillEditor},computed:{userStatusList:function(){return console.log(this.$store.state.userStatusList),this.$store.state.userStatusList},dialogMaterialList:function(){return console.log("1112333333333"),console.log(this.$store.state.dialogMaterialList.list),this.$store.state.dialogMaterialList},optionsOpen:function(){return this.$store.state.optionsOpen},optionDeviceType:function(){return this.$store.state.optionDeviceType},optionDefault:function(){return this.$store.state.optionDefault},actionUrl:function(){return this.$store.state.actionUrl},optionFrequency:function(){return this.$store.state.optionFrequency},dialogMaterialListAll:function(){return this.$store.state.dialogMaterialListAll},getAdvertImgurl:function(){return function(t){var e=this.$store.state.dialogMaterialListAll.list;if(e)for(var a=0;a<e.length;a++)if(e[a].advertid==t)return e[a].imgurl}},getAdvertJumplink:function(){return function(t){var e=this.$store.state.dialogMaterialListAll.list;if(e)for(var a=0;a<e.length;a++)if(e[a].advertid==t)return e[a].jumplink}}},methods:{init:function(){this.getDialogList("1",1),this.getDialogList("2",1),this.getDialogList("0",1),this.$store.dispatch("changeGetUserStatusList"),this.$store.dispatch("changeDialogMaterialList",this.defaultParams)},formatJumptype:function(t,e){for(var a=0;a<this.optionsOpen.length;a++)if(t.jumptype==this.optionsOpen[a].value)return this.optionsOpen[a].label},filterJumptype:function(t,e){switch(t.jumptype){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}},formatStatus:function(t,e){return 0==t.status?"已停用":"已启用"},formatDate:function(t,e){return t.starttime+" 至 "+t.endtime},onEditorChange:function(t){t.editor;var e=t.html;t.text;this.content=e},closeDialog:function(){var t=this;this.resetForm("addMaterialForm"),l()(this.addMaterialForm).forEach(function(e){"dateTime"==e?t.addMaterialForm.dateTime=[]:(t.addMaterialForm[e]="",t.imageUrl="")})},resetForm:function(t){this.$refs[t].resetFields()},closePopupDialog:function(){var t=this;this.resetForm("addPopupForm"),l()(this.addPopupForm).forEach(function(e){"dateTime"==e?t.addPopupForm.dateTime=[]:"advertList"==e?t.addPopupForm.advertList=[{advertid:"",jumplink:"",imgurl:""}]:t.addPopupForm[e]=""}),console.log(this.addPopupForm)},handleSizeChangeAll:function(t){this.allDialogListParams.pageSize=t,this.getDialogList("0",this.allactiveName)},handleCurrentChangeAll:function(t){this.allDialogListParams.pageNum=t,this.getDialogList("0",this.allactiveName)},handleSizeChangeAnd:function(t){this.andDialogListParams.pageSize=t,this.getDialogList("1",this.andactiveName)},handleCurrentChangeAnd:function(t){this.andDialogListParams.pageNum=t,this.getDialogList("1",this.andactiveName)},handleSizeChangeIos:function(t){this.iosDialogListParams.pageSize=t,this.getDialogList("2",this.iosactiveName)},handleCurrentChangeIos:function(t){this.iosDialogListParams.pageNum=t,this.getDialogList("2",this.iosactiveName)},handleSizeChange:function(t){this.defaultParams.pageSize=t,this.$store.dispatch("changeDialogMaterialList",this.defaultParams)},handleCurrentChange:function(t){this.defaultParams.pageNum=t,this.$store.dispatch("changeDialogMaterialList",this.defaultParams)},handleStop:function(t,e){var a=this,i=1==e.status?"停用":"启用";this.$confirm("此操作将"+i+"首页弹窗"+e.icontext+"，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.Api.maUpdateStatus({oldIds:e.oldIds,status:1==e.status?"0":"1",detailid:e.detailid||""}).then(function(t){if(200==t.data.code)switch(a.$message({type:"success",message:i+"成功!"}),e.devicetype){case 0:a.getDialogList("0",a.allactiveName);break;case 1:a.getDialogList("1",a.andactiveName);break;case 2:a.getDialogList("2",a.iosactiveName)}else a.$message.error(t.data.msg)})}).catch(function(){a.$message({type:"info",message:"已取消"+i})})},getDialogList:function(t,e){var a=this,i={positionId:1021001,deviceType:t,userStatus:e||"1",pageSize:10,pageNum:1};0==t?(i.pageSize=this.allDialogListParams.pageSize,i.pageNum=this.allDialogListParams.pageNum):1==t?(i.pageSize=this.andDialogListParams.pageSize,i.pageNum=this.andDialogListParams.pageNum):2==t&&(i.pageSize=this.iosDialogListParams.pageSize,i.pageNum=this.iosDialogListParams.pageNum),this.Api.maGetBannerList(i).then(function(e){200==e.data.code?1==t?(a.androidDialogList=e.data.data,console.log(e.data.data.list),a.loading=!1):2==t?(a.loading=!1,a.iosDialogList=e.data.data):(a.loading=!1,a.allDialogList=e.data.data):(a.loading=!1,a.$message.error(e.data.msg))})},addPopupDialogOpen:function(){this.addPopText="添加首页弹窗",this.addPopupDialog=!0},addMaterialList:function(t){this.addMaterialListDialog=!0,this.addMaterialText="添加首页弹窗素材"},editMaterial:function(t){this.addMaterialListDialog=!0,this.addMaterialText="编辑首页弹窗素材",this.addMaterialForm=JSON.parse(r()(t))},deletDetail:function(t){var e=this;this.$confirm('此操作将删除素材 "'+t.icontext+'"， 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.Api.maDelMaterial({advertId:t.advertid}).then(function(t){200==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.$store.dispatch("changeDialogMaterialList",e.defaultParams)):e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sureSaveMaterial:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a={icontext:e.addMaterialForm.icontext,jumptype:e.addMaterialForm.jumptype,jumplink:e.addMaterialForm.jumplink,fileid:e.addMaterialForm.fileid,materialtype:"3"};e.addMaterialForm.advertid&&(a.advertid=e.addMaterialForm.advertid),e.Api.maSaveMaterial(a).then(function(t){200==t.data.code?(e.$message.success("保存成功"),e.$store.dispatch("changeDialogMaterialList",e.defaultParams),e.addMaterialListDialog=!1):e.$message.error(t.data.msg)})})},handleAvatarSuccess:function(t,e){var a=this;this.$message.success("上传成功"),this.imageUrl=URL.createObjectURL(e.raw);var i=new Image;i.src=this.imageUrl,i.onload=function(){a.addMaterialForm.imgmeasure=i.width+"*"+i.height,a.addMaterialForm.imgsize=(e.size/1024).toFixed(2)+"KB",a.addMaterialForm.imgurl=a.imageUrl,a.addMaterialForm.fileid=t.data.id,console.log(a.addMaterialForm.fileid)},this.loaded=!1},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<1;return e?a?(this.loaded=!0,e&&a):(this.$message.error("上传图片大小不能超过1MB!"),void(this.loaded=!1)):(this.$message.error("上传启动图只能是PNG 格式!"),void(this.loaded=!1))},handleUploading:function(t,e,a){},changeMertial:function(t){console.log(t)},addMaterialItem:function(){this.addPopupForm.advertList&&4==this.addPopupForm.advertList.length?this.$message.error("最多添加4张素材"):this.addPopupForm.advertList.push({advertid:"",jumplink:"",imgurl:""})},removeMaterialItem:function(t){for(var e=0;e<this.addPopupForm.advertList.length;e++)e==t&&this.addPopupForm.advertList.splice(t,1)},upMaterialItem:function(t){console.log("index",t);var e=this.addPopupForm.advertList[t-1];this.$set(this.addPopupForm.advertList,t-1,this.addPopupForm.advertList[t]),this.$set(this.addPopupForm.advertList,t,e)},downMaterialItem:function(t){var e=this.addPopupForm.advertList[t+1];this.$set(this.addPopupForm.advertList,t+1,this.addPopupForm.advertList[t]),this.$set(this.addPopupForm.advertList,t,e)},sureSavePopup:function(t){var e=this,a=String(new Date(this.addPopupForm.starttime)),i=String(new Date(this.addPopupForm.endtime));this.$refs[t].validate(function(t){if(!t)return!1;for(var s=[],l=0;l<e.addPopupForm.advertList.length;l++){if(!e.addPopupForm.advertList[l].advertid)return void e.$message.error("请选择素材！");s=s.concat({advertid:e.addPopupForm.advertList[l].advertid,priority:l+1})}var o={oldIds:e.addPopupForm.oldIds||"",positionid:"1021001",devicetype:e.addPopupForm.devicetype,userstatus:e.addPopupForm.userstatus,starttime:a,endtime:i,materialInfoStr:r()(r()(s)),frequency:e.addPopupForm.frequency,detailid:e.addPopupForm.detailid||""};console.log(o),e.addMaterialForm.advertid&&(o.advertid=e.addMaterialForm.advertid),e.Api.maSaveBannerAndIcon(o).then(function(t){if(200==t.data.code){switch(e.addPopupForm.devicetype!=e.checkedType&&e.getDialogList(e.checkedType,e.allactiveName),e.addPopupForm.devicetype){case 0:e.getDialogList("0",e.allactiveName);break;case 1:e.getDialogList("1",e.andactiveName);break;case 2:e.getDialogList("2",e.iosactiveName)}e.$message.success("保存成功"),e.addPopupDialog=!1}else e.$message.error(t.data.msg)})})},checkAllStatus:function(t){console.log(t.name),this.allactiveName=t.name,this.getDialogList("0",t.name)},checkAndStatus:function(t){this.andactiveName=t.name,this.getDialogList("1",t.name)},checkIosStatus:function(t){this.iosactiveName=t.name,this.getDialogList("2",t.name)},checkDeviceType:function(t){this.checkedType=t.name},editHomeDialog:function(t,e){console.log("===>row"),console.log(e),this.addPopText="编辑首页弹窗",this.addPopupForm=JSON.parse(r()(e)),this.addPopupDialog=!0},deletHomeDialog:function(t,e){var a=this;this.$confirm("此操作将永久删除弹窗 ，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){a.Api.maDelBannerAndIcon({oldIds:e.oldIds,detailId:e.detailid}).then(function(t){if(200==t.data.code)switch(a.$message({type:"success",message:"删除成功!"}),e.devicetype){case 0:a.getDialogList("0",a.allactiveName);break;case 1:a.getDialogList("1",a.andactiveName);break;case 2:a.getDialogList("2",a.iosactiveName)}})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},created:function(){this.init()},mounted:function(){},watch:{},filters:{jumpType:function(t){switch(t){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}}}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homeDialog-view"},[a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.checkDeviceType}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addPopupDialogOpen}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗\n                        ")])]),t._v(" "),[a("el-tabs",{staticClass:"second-tabs",attrs:{"tab-position":"top"},on:{"tab-click":t.checkAllStatus},model:{value:t.allactiveName,callback:function(e){t.allactiveName=e},expression:"allactiveName"}},t._l(t.userStatusList,function(e){return a("el-tab-pane",{key:e.code,attrs:{label:e.desc,name:e.code}},[a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗/全部-"+t._s(e.desc))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.allDialogList.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"弹窗"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userstatusname",label:"用户状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"frequencyname",label:"弹窗频率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片内容",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"tab-imgContent"},[a("div",{staticClass:"left"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.icontext))]),t._v(" "),a("el-tooltip",{attrs:{content:e.jumplink,placement:"bottom",effect:"light"}},[a("p",[t._v(t._s(e.jumplink))])])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editHomeDialog(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                                "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deletHomeDialog(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.allDialogList.total},on:{"size-change":t.handleSizeChangeAll,"current-change":t.handleCurrentChangeAll}})],1)}))]],2),t._v(" "),a("el-tab-pane",{attrs:{name:"1",label:"Android_弹窗"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addPopupDialogOpen}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗\n                        ")])]),t._v(" "),[a("el-tabs",{staticClass:"second-tabs",attrs:{"tab-position":"top"},on:{"tab-click":t.checkAndStatus},model:{value:t.andactiveName,callback:function(e){t.andactiveName=e},expression:"andactiveName"}},t._l(t.userStatusList,function(e){return a("el-tab-pane",{key:e.code,attrs:{label:e.desc,name:e.code}},[a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗/Android-"+t._s(e.desc))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.androidDialogList.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"弹窗"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userstatusname",label:"用户状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"frequencyname",label:"弹窗频率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片内容",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"tab-imgContent"},[a("div",{staticClass:"left"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.icontext))]),t._v(" "),a("el-tooltip",{attrs:{content:e.jumplink,placement:"bottom",effect:"light"}},[a("p",[t._v(t._s(e.jumplink))])])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editHomeDialog(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                                "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deletHomeDialog(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.androidDialogList.total},on:{"size-change":t.handleSizeChangeAnd,"current-change":t.handleCurrentChangeAnd}})],1)}))]],2),t._v(" "),a("el-tab-pane",{attrs:{name:"2",label:"IOS_弹窗"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addPopupDialogOpen}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗\n                        ")])]),t._v(" "),a("el-tabs",{staticClass:"second-tabs",attrs:{"tab-position":"top"},on:{"tab-click":t.checkIosStatus},model:{value:t.iosactiveName,callback:function(e){t.iosactiveName=e},expression:"iosactiveName"}},t._l(t.userStatusList,function(e){return a("el-tab-pane",{key:e.code,attrs:{label:e.desc,name:e.code}},[a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗/IOS-"+t._s(e.desc))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.iosDialogList.list,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"弹窗"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userstatusname",label:"用户状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"frequencyname",label:"弹窗频率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片内容",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"tab-imgContent"},[a("div",{staticClass:"left"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.icontext))]),t._v(" "),a("el-tooltip",{attrs:{content:e.jumplink,placement:"bottom",effect:"light"}},[a("p",[t._v(t._s(e.jumplink))])])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editHomeDialog(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                            "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deletHomeDialog(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.iosDialogList.total},on:{"size-change":t.handleSizeChangeIos,"current-change":t.handleCurrentChangeIos}})],1)}))],1),t._v(" "),a("el-tab-pane",{attrs:{label:"弹窗素材管理"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addMaterialList}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗素材\n                        ")])]),t._v(" "),a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗素材")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dialogMaterialList.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"icontext",label:"素材名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片预览",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"tab-imgContent"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.row.imgurl,alt:e.row.imgurl},slot:"reference"})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"jumplink",label:"跳转链接"}}),t._v(" "),a("el-table-column",{attrs:{prop:"junmtype",label:"打开方式",formatter:t.filterJumptype}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editMaterial(e.row)}}},[t._v("编辑\n                                ")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){t.deletDetail(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.dialogMaterialList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.addPopText,width:"40%",center:"",visible:t.addPopupDialog},on:{"update:visible":function(e){t.addPopupDialog=e},closed:t.closePopupDialog}},[a("el-form",{ref:"addPopupForm",attrs:{model:t.addPopupForm,rules:t.addPopupFormRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"平台分类",prop:"devicetype"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"选择投放平台"},model:{value:t.addPopupForm.devicetype,callback:function(e){t.$set(t.addPopupForm,"devicetype",e)},expression:"addPopupForm.devicetype"}},t._l(t.optionDeviceType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"用户状态",prop:"userstatus"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"选择用户状态"},model:{value:t.addPopupForm.userstatus,callback:function(e){t.$set(t.addPopupForm,"userstatus",e)},expression:"addPopupForm.userstatus"}},t._l(t.userStatusList,function(t){return a("el-option",{key:Number(t.code),attrs:{label:t.desc,value:Number(t.code)}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"弹窗频率",prop:"frequency"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"选择提示频率"},model:{value:t.addPopupForm.frequency,callback:function(e){t.$set(t.addPopupForm,"frequency",e)},expression:"addPopupForm.frequency"}},t._l(t.optionFrequency,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.addPopupForm.starttime,callback:function(e){t.$set(t.addPopupForm,"starttime",e)},expression:"addPopupForm.starttime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.addPopupForm.endtime,callback:function(e){t.$set(t.addPopupForm,"endtime",e)},expression:"addPopupForm.endtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配置图片内容","label-width":"100px"}}),t._v(" "),a("el-form-item",{attrs:{labelWidth:"0px"}},t._l(t.addPopupForm.advertList,function(e,i){return a("el-row",{key:i,staticClass:"dialog-advertItem",attrs:{gutter:20}},[a("el-col",{staticClass:"dialog-advertItem-left",attrs:{span:18}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{size:"mini",filterable:""},on:{change:t.changeMertial},model:{value:e.advertid,callback:function(a){t.$set(e,"advertid",a)},expression:"key.advertid"}},t._l(t.dialogMaterialListAll.list,function(t){return a("el-option",{key:t.advertid,attrs:{label:t.icontext,value:t.advertid}})}))],1),t._v(" "),a("el-col",{staticClass:"dialog-advertItem-img",attrs:{span:6}},[a("img",{attrs:{src:t.getAdvertImgurl(e.advertid)}})]),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{size:"mini",value:t.getAdvertJumplink(e.advertid),readonly:""}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[i==t.addPopupForm.advertList.length-1?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.addMaterialItem}}):t._e(),t._v(" "),t.addPopupForm.advertList.length>1?a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:""},on:{click:function(e){t.removeMaterialItem(i)}}}):t._e(),t._v(" "),i>0&&t.addPopupForm.advertList.length>1?a("el-button",{attrs:{type:"warning",icon:"el-icon-upload2",circle:""},on:{click:function(e){t.upMaterialItem(i)}}}):t._e(),t._v(" "),t.addPopupForm.advertList.length>1&&i!=t.addPopupForm.advertList.length-1?a("el-button",{attrs:{type:"warning",icon:"el-icon-download",circle:""},on:{click:function(e){t.downMaterialItem(i)}}}):t._e()],1)],1)}))],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addPopupDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureSavePopup("addPopupForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.addMaterialText,width:"40%",center:"",visible:t.addMaterialListDialog},on:{"update:visible":function(e){t.addMaterialListDialog=e},closed:t.closeDialog}},[a("div",{staticClass:"dialog-tips"},[a("i",{staticClass:"el-icon-info"}),t._v(" 为保障用户体验，素材图统一为PNG、jpg、gif格式，大小不超过1M。")]),t._v(" "),a("el-form",{ref:"addMaterialForm",attrs:{model:t.addMaterialForm,rules:t.addMaterialRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"素材名称",prop:"icontext"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addMaterialForm.icontext,callback:function(e){t.$set(t.addMaterialForm,"icontext",e)},expression:"addMaterialForm.icontext"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"打开方式",prop:"jumptype"}},[a("el-select",{attrs:{placeholder:"请选择打开方式"},model:{value:t.addMaterialForm.jumptype,callback:function(e){t.$set(t.addMaterialForm,"jumptype",e)},expression:"addMaterialForm.jumptype"}},t._l(t.optionsOpen,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),1==t.addMaterialForm.jumptype||2==t.addMaterialForm.jumptype?a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addMaterialForm.jumplink,callback:function(e){t.$set(t.addMaterialForm,"jumplink",e)},expression:"addMaterialForm.jumplink"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,drag:t.canDrag,disabled:t.loaded,"with-credentials":t.actionWidth,"show-file-list":!1,"on-progress":t.handleUploading,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.addMaterialForm.imgurl?a("img",{staticClass:"avatar",attrs:{src:t.addMaterialForm.imgurl||""}}):t._e(),t._v(" "),a("i",{staticClass:"el-icon-upload"}),t._v(" "),t.loaded?a("div",{staticClass:"el-up-loading"},[a("i",{staticClass:"el-icon-loading"}),a("br"),t._v("拼命上传中")]):t._e(),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1MB")])])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addMaterialListDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureSaveMaterial("addMaterialForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,d,!1,function(t){a("xJwV"),a("DsOU")},"data-v-9d082d10",null);e.default=c.exports},"5BH6":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fZjL"),r=a.n(i),s=a("mvHQ"),l=a.n(s),o=a("G0J2"),n=(a("fMLZ"),{name:"StartFigure",data:function(){var t=this;return{editDisabled:!1,actionWidth:!0,bigImgUrlDialog:!1,canDrag:!0,imgPercent:0,loaded:!1,bigImgUrl:"",content:"",startTitle:"",dialogFormVisible:!1,activeName:"first",addForm:{type:"",isDefault:"",openType:"",theHref:"",dateTime:""},editForm:{advertid:"",icontext:"",devicetype:"",imgsize:"",isdefault:"",jumptype:"",userstatus:"",starttime:"",endtime:"",frequency:"",jumplink:"",fileid:"",advertList:[{advertid:"",fileid:"",filename:"",imgmeasure:"",imgsize:"",imgurl:""},{advertid:"",fileid:"",filename:"",imgmeasure:"",imgsize:"",imgurl:""}]},startRules:{icontext:[{required:!0,message:"请输入图片名称"}],devicetype:[{required:!0,message:"请选择分类"}],isdefault:[{required:!0,message:"请选择是否默认图"}],jumptype:[{required:!0,message:"请选择打开类型"}],jumplink:[{required:!0,message:"请输入跳转链接"}],starttime:[{required:!0,message:"请选择开始时间"},{validator:function(e,a,i){""===a?i(new Error("请输入开始时间")):(""!==t.editForm.endtime&&t.$refs.editForm.validateField("endtime"),i())},trigger:"change"}],endtime:[{required:!0,message:"请选择结束时间"},{validator:function(e,a,i){""===a?i(new Error("请输入结束时间")):a<t.editForm.starttime?i(new Error("结束时间不能小于开始时间!")):i()},trigger:"change"}],imgmeasure:[{required:!0,message:"请上传图片"}],imgsize:[{required:!0,message:"请上传图片"}],imgmeasure1:[{required:!0,message:"请上传图片"}],imgsize1:[{required:!0,message:"请上传图片"}]},pictureLimit:1,canEdit:!1,imageUrl:"",imageUrl1:"",pageSize:10,pageNum:1,startfigure:[],deviceType:"1",optionDevice:[{label:"android",value:"1"},{label:"ios",value:"2"}]}},components:{quillEditor:o.quillEditor},computed:{optionsOpen:function(){return this.$store.state.optionsOpen},startOptionDeviceType:function(){return this.$store.state.startOptionDeviceType},optionDefault:function(){return this.$store.state.optionDefault},actionUrl:function(){return this.$store.state.actionUrl}},methods:{init:function(){this.changeStartFigureList()},handleClick:function(){},handleStop:function(t,e){var a=this,i=1==e.status?"停用":"启用";this.$confirm("此操作将"+i+'启动图 "'+e.icontext+'" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.Api.maUpdateStatus({oldIds:e.oldIds,status:1==e.status?"0":"1",detailid:e.detailid||""}).then(function(t){200==t.data.code?(a.$message({type:"success",message:i+"成功!"}),a.changeStartFigureList()):a.$message.error(t.data.msg)})}).catch(function(){a.$message({type:"info",message:"已取消"+i})})},checkAllStatus:function(t){this.changeStartFigureList()},formatDate:function(t,e){return t.starttime+" 至 "+t.endtime},formatStatus:function(t,e){return 0==t.status?"已停用":"已启用"},formatDefault:function(t,e){return 1==t.isdefault?"是":"否"},changeStartFigureList:function(){var t=this;this.Api.maGetAdvertListBatch({positionId:"1003001",deviceType:this.deviceType,pageSize:this.pageSize,pageNum:this.pageNum}).then(function(e){if(200==e.data.code){t.startfigure=e.data.data;for(var a=0;a<t.startfigure.list.length;a++)t.startfigure.list[a].advertList=t.startfigure.list[a].advertList.reverse()}else t.$message.error(e.data.msg)})},addDialog:function(){this.startTitle="添加启动图",this.dialogFormVisible=!0},onEditorChange:function(t){t.editor;var e=t.html;t.text;this.content=e},submit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.saveStartFigure()})},saveStartFigure:function(){var t=this,e=String(new Date(this.editForm.starttime)),a=String(new Date(this.editForm.endtime)),i=[];i="1"==this.editForm.devicetype?[{advertid:this.editForm.advertList[0].advertid||"",fileid:this.editForm.advertList[0].fileid,filename:this.editForm.advertList[0].filename,imgsize:this.editForm.advertList[0].imgsize,imgmeasure:this.editForm.advertList[0].imgmeasure}]:[{advertid:this.editForm.advertList[0].advertid||"",fileid:this.editForm.advertList[0].fileid,filename:this.editForm.advertList[0].filename,imgsize:this.editForm.advertList[0].imgsize,imgmeasure:this.editForm.advertList[0].imgmeasure},{advertid:this.editForm.advertList[1].advertid||"",fileid:this.editForm.advertList[1].fileid,filename:this.editForm.advertList[1].filename,imgsize:this.editForm.advertList[1].imgsize,imgmeasure:this.editForm.advertList[1].imgmeasure}];var r={oldIds:this.editForm.oldIds,icontext:this.editForm.icontext,positionid:"1003001",advertid:this.editForm.advertid||"",relid:this.editForm.relid||"",devicetype:this.editForm.devicetype,isdefault:this.editForm.isdefault,jumptype:this.editForm.jumptype,starttime:e,endtime:a,jumplink:this.editForm.jumplink,frequency:this.editForm.frequency,advertListStr:l()(l()(i)),detailid:this.editForm.detailid||""};this.Api.maSaveAdvertBatch(r).then(function(e){200==e.data.code?(t.$message.success("保存成功"),t.dialogFormVisible=!1,t.changeStartFigureList()):t.$message.error(e.data.msg)})},handleAvatarSuccess:function(t,e){var a=this;this.$message.success("上传成功"),this.imageUrl=URL.createObjectURL(e.raw);var i=new Image;i.src=this.imageUrl,i.onload=function(){a.editForm.advertList[0].imgmeasure=i.width+"*"+i.height,a.editForm.advertList[0].imgsize=(e.size/1024).toFixed(2)+"KB",a.editForm.advertList[0].imgurl=a.imageUrl,a.editForm.advertList[0].fileid=t.data.id,a.editForm.advertList[0].filename=e.name,console.log(a.editForm.fileid)},this.loaded=!1},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<1;return e?a?(this.loaded=!0,e&&a):(this.$message.error("上传图片大小不能超过1MB!"),void(this.loaded=!1)):(this.$message.error("上传启动图只能是PNG或者JPG 格式!"),void(this.loaded=!1))},handleUploading:function(t,e,a){},handleAvatarSuccess1:function(t,e){var a=this;this.$message.success("上传成功"),this.imageUrl1=URL.createObjectURL(e.raw);var i=new Image;i.src=this.imageUrl1,i.onload=function(){a.editForm.advertList[1].imgmeasure=i.width+"*"+i.height,a.editForm.advertList[1].imgsize=(e.size/1024).toFixed(2)+"KB",a.editForm.advertList[1].imgurl=a.imageUrl1,a.editForm.advertList[1].fileid=t.data.id,a.editForm.advertList[1].filename=e.name,console.log(a.editForm.fileid)},this.loaded=!1},beforeAvatarUpload1:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<1;return e?a?(this.loaded=!0,e&&a):(this.$message.error("上传图片大小不能超过1MB!"),void(this.loaded=!1)):(this.$message.error("上传启动图只能是PNG或JPG 格式!"),void(this.loaded=!1))},handleUploading1:function(t,e,a){},editDetail:function(t,e){this.startTitle="编辑启动图",this.dialogFormVisible=!0,this.editForm=JSON.parse(l()(e)),this.editDisabled=!0},deletStart:function(t,e){var a=this;this.$confirm("此操作将永久删除启动图，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){a.Api.maDelAdvert({advertId:e.advertid,detailId:e.detailid}).then(function(t){200==t.data.code?(a.$message({type:"success",message:"删除成功!"}),a.changeStartFigureList()):a.$message.error(t.data.msg)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},resetForm:function(t){this.$refs[t].resetFields()},closeDialog:function(){var t=this;this.resetForm("editForm"),r()(this.editForm).forEach(function(e){"dateTime"==e?t.editForm.dateTime=[]:t.editForm[e]="advertList"==e?[{imgmeasure:"",imgsize:"",imgurl:""},{imgmeasure:"",imgsize:"",imgurl:""}]:""}),this.editDisabled=!1},handleSizeChangeAll:function(t){this.pageSize=t,this.changeStartFigureList()},handleCurrentChangeAll:function(t){this.pageNum=t,this.changeStartFigureList()}},mounted:function(){this.init()},watch:{},filters:{jumpType:function(t){switch(t){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}}}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.checkAllStatus},model:{value:t.deviceType,callback:function(e){t.deviceType=e},expression:"deviceType"}},t._l(t.optionDevice,function(e){return a("el-tab-pane",{key:e.value,attrs:{label:e.label,name:e.value}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，启动图统一为PNG、jpg、gif格式，尺寸：720*1280px，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addDialog}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增启动图\n                        ")])]),t._v(" "),[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.startfigure.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"icontext",label:"启动图名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jumptypename",width:"120",label:"打开方式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{prop:"isdefault",formatter:t.formatDefault,label:"是否默认"}}),t._v(" "),a("el-table-column",{attrs:{prop:"advertList[0].jumplink",label:"跳转链接",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片预览",prop:"advertList","header-align":"center",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"left_imgContent"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1)})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",width:"150",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:1==e.row.isdefault,type:"primary",size:"mini"},on:{click:function(a){t.editDetail(e.$index,e.row)}}},[t._v("\n                                            编辑")]),t._v(" "),a("el-button",{attrs:{disabled:1==e.row.isdefault,size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                            "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{disabled:1==e.row.isdefault,type:"danger",size:"mini"},on:{click:function(a){t.deletStart(e.$index,e.row)}}},[t._v("\n                                            删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.startfigure.total},on:{"size-change":t.handleSizeChangeAll,"current-change":t.handleCurrentChangeAll}})]]],2)}))],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.startTitle,width:"40%",center:"",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.closeDialog}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.startRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"平台分类",prop:"devicetype"}},[a("el-select",{attrs:{disabled:t.editDisabled,placeholder:"选择投放平台"},model:{value:t.editForm.devicetype,callback:function(e){t.$set(t.editForm,"devicetype",e)},expression:"editForm.devicetype"}},t._l(t.startOptionDeviceType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"图片名称",prop:"icontext"}},[a("el-input",{attrs:{placeholder:"请输入图片名称",autocomplete:"off"},model:{value:t.editForm.icontext,callback:function(e){t.$set(t.editForm,"icontext",e)},expression:"editForm.icontext"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传图片1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,drag:t.canDrag,disabled:t.loaded,"with-credentials":t.actionWidth,"show-file-list":!1,"on-progress":t.handleUploading,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.editForm.advertList[0].imgurl?a("img",{staticClass:"avatar",attrs:{src:t.editForm.advertList[0].imgurl||""}}):t._e(),t._v(" "),a("i",{staticClass:"el-icon-upload"}),t._v(" "),t.loaded?a("div",{staticClass:"el-up-loading"},[a("i",{staticClass:"el-icon-loading"}),a("br"),t._v("拼命上传中")]):t._e(),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1MB，适用于正常屏幕")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"图片1尺寸"}},[t.editForm.advertList[0]?a("el-input",{attrs:{readOnly:"",placeholder:"图片尺寸",autocomplete:"off"},model:{value:t.editForm.advertList[0].imgmeasure,callback:function(e){t.$set(t.editForm.advertList[0],"imgmeasure",e)},expression:"editForm.advertList[0].imgmeasure"}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"图片1大小"}},[t.editForm.advertList[0]?a("el-input",{attrs:{placeholder:"图片大小",readOnly:"",autocomplete:"off"},model:{value:t.editForm.advertList[0].imgsize,callback:function(e){t.$set(t.editForm.advertList[0],"imgsize",e)},expression:"editForm.advertList[0].imgsize"}}):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转链接",prop:"jumplink"}},[a("el-input",{attrs:{placeholder:"输入跳转链接",autocomplete:"off"},model:{value:t.editForm.jumplink,callback:function(e){t.$set(t.editForm,"jumplink",e)},expression:"editForm.jumplink"}})],1),t._v(" "),2==t.editForm.devicetype?a("el-form-item",{attrs:{label:"上传图片2"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,drag:t.canDrag,disabled:t.loaded,"with-credentials":t.actionWidth,"show-file-list":!1,"on-progress":t.handleUploading1,"on-success":t.handleAvatarSuccess1,"before-upload":t.beforeAvatarUpload1}},[t.editForm.advertList[1].imgurl?a("img",{staticClass:"avatar",attrs:{src:t.editForm.advertList[1].imgurl||""}}):t._e(),t._v(" "),a("i",{staticClass:"el-icon-upload"}),t._v(" "),t.loaded?a("div",{staticClass:"el-up-loading"},[a("i",{staticClass:"el-icon-loading"}),a("br"),t._v("拼命上传中")]):t._e(),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1MB，适用于流海屏手机")])])],1):t._e(),t._v(" "),2==t.editForm.devicetype?a("el-form-item",{attrs:{label:"图片2尺寸"}},[t.editForm.advertList[1]?a("el-input",{attrs:{readOnly:"",placeholder:"图片尺寸",autocomplete:"off"},model:{value:t.editForm.advertList[1].imgmeasure,callback:function(e){t.$set(t.editForm.advertList[1],"imgmeasure",e)},expression:"editForm.advertList[1].imgmeasure"}}):t._e()],1):t._e(),t._v(" "),2==t.editForm.devicetype?a("el-form-item",{attrs:{label:"图片2大小"}},[t.editForm.advertList[1]?a("el-input",{attrs:{placeholder:"图片大小",readOnly:"",autocomplete:"off"},model:{value:t.editForm.advertList[1].imgsize,callback:function(e){t.$set(t.editForm.advertList[1],"imgsize",e)},expression:"editForm.advertList[1].imgsize"}}):t._e()],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"打开方式",prop:"jumptype"}},[a("el-select",{attrs:{placeholder:"请选择打开方式"},model:{value:t.editForm.jumptype,callback:function(e){t.$set(t.editForm,"jumptype",e)},expression:"editForm.jumptype"}},t._l(t.optionsOpen,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.editForm.starttime,callback:function(e){t.$set(t.editForm,"starttime",e)},expression:"editForm.starttime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.editForm.endtime,callback:function(e){t.$set(t.editForm,"endtime",e)},expression:"editForm.endtime"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit("editForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.bigImgUrlDialog},on:{"update:visible":function(e){t.bigImgUrlDialog=e}}},[a("img",{attrs:{width:"100%",src:t.bigImgUrl,alt:""}})])],1)},staticRenderFns:[]};var c=a("VU/8")(n,d,!1,function(t){a("pEDK"),a("hpkB")},"data-v-c6906ea6",null);e.default=c.exports},"6xQZ":function(t,e){},DsOU:function(t,e){},LHIt:function(t,e){},SY5z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),r=a.n(i),s=a("mvHQ"),l=a.n(s),o=a("fZjL"),n=a.n(o),d=a("G0J2"),c=(a("fMLZ"),{name:"HomeSuspension",data:function(){var t=this;return{BannerTypeList:[],allactiveName:"1001001",userStatus:"",allDialogListParams:{pageSize:10,pageNum:1},andDialogListParams:{pageSize:1,pageNum:10},iosDialogListParams:{pageSize:1,pageNum:10},actionWidth:!0,bigImgUrlDialog:!1,canDrag:!0,imgPercent:0,loaded:!1,loading:!0,bigImgUrl:"",content:"",addMaterialRules:{icontext:[{required:!0,message:"请输入文件名称"}],jumptype:[{required:!0,message:"请选择打开方式"}],jumplink:[{required:!0,message:"请填写跳转链接"}],starttime:[{required:!0,message:"请选择开始时间"},{validator:function(e,a,i){""===a?i(new Error("请输入开始时间")):(""!==t.addMaterialForm.endtime&&t.$refs.addMaterialForm.validateField("endtime"),i())},trigger:"change"}],endtime:[{required:!0,message:"请选择结束时间"},{validator:function(e,a,i){""===a?i(new Error("请输入结束时间")):a<t.addMaterialForm.starttime?i(new Error("结束时间不能小于开始时间!")):i()},trigger:"change"}]},pictureLimit:1,canEdit:!1,imageUrl:"",androidDialogList:[],iosDialogList:[],allDialogList:[],materialList:[],addMaterialListDialog:!1,addMaterialForm:{advertid:"",icontext:"",jumptype:"",jumplink:"",fileid:"",imgurl:""},defaultParams:{pageSize:10,pageNum:1},addPopupDialog:!1,addPopupForm:{oldIds:"",positionid:"",userstatus:"",starttime:"",devicetype:"",endtime:"",advertid:"",priority:"",frequency:"",advertList:[{advertid:"",jumplink:"",imgurl:""}]},addPopupFormRules:{icontext:[{required:!0,message:"请填写文件名称",trigger:"blur"}],jumptype:[{required:!0,message:"请选择跳转方式",trigger:"change"}],userstatus:[{required:!0,message:"请选择用户状态",trigger:"change"}],positionid:[{required:!0,message:"选择banner位置",trigger:"change"}]}}},components:{quillEditor:d.quillEditor},computed:{userStatusList:function(){return console.log(this.$store.state.userStatusList),this.$store.state.userStatusList},dialogMaterialList:function(){return console.log("1112333333333"),console.log(this.$store.state.bannerMaterialList.list),this.$store.state.bannerMaterialList},optionsOpen:function(){return this.$store.state.optionsOpen},optionDeviceType:function(){return this.$store.state.optionDeviceType},optionDefault:function(){return this.$store.state.optionDefault},actionUrl:function(){return this.$store.state.actionUrl},optionFrequency:function(){return this.$store.state.optionFrequency},dialogMaterialListAll:function(){return this.$store.state.bannerMaterialListAll},getAdvertImgurl:function(){return function(t){var e=this.$store.state.dialogMaterialListAll.list;if(e)for(var a=0;a<e.length;a++)if(e[a].advertid==t)return e[a].imgurl}},getAdvertJumplink:function(){return function(t){var e=this.$store.state.bannerMaterialListAll.list;if(e)for(var a=0;a<e.length;a++)if(e[a].advertid==t)return e[a].jumplink}}},methods:{handleStop:function(t,e){var a=this,i=1==e.status?"停用":"启用";this.$confirm("此操作将"+i+'悬浮窗 "'+e.icontext+'，" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.Api.maUpdateStatus({oldIds:e.relid,status:1==e.status?"0":"1",detailid:e.detailid||""}).then(function(t){200==t.data.code?(a.$message({type:"success",message:i+"成功!"}),a.getDialogList(e.devicetype)):a.$message.error(t.data.msg)})}).catch(function(){a.$message({type:"info",message:"已取消"+i})})},formatStatus:function(t,e){return 0==t.status?"已停用":"已启用"},init:function(){this.getDialogList("1"),this.getDialogList("2"),this.getBannerTypeList(),this.$store.dispatch("changeGetUserStatusList")},filterJumptype:function(t,e){switch(t.jumptype){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}},filterPosition:function(t,e){for(var a=0;a<this.BannerTypeList.length;a++)return console.log(this.BannerTypeList),t.positionid==this.BannerTypeList[a].positionId?this.BannerTypeList[a].desc:"无"},getBannerTypeList:function(){var t=this;this.Api.maGetAllBannerTypeList({}).then(function(e){200==e.data.code&&(t.BannerTypeList=e.data.data)})},formatJumptype:function(t,e){for(var a=0;a<this.optionsOpen.length;a++)if(t.jumptype==this.optionsOpen[a].value)return this.optionsOpen[a].label},formatDate:function(t,e){return t.starttime+" 至 "+t.endtime},onEditorChange:function(t){t.editor;var e=t.html;t.text;this.content=e},resetForm:function(t){this.$refs[t].resetFields()},closeDialog:function(){var t=this;this.resetForm("addMaterialForm"),n()(this.addMaterialForm).forEach(function(e){"dateTime"==e?t.addMaterialForm.dateTime=[]:(t.addMaterialForm[e]="",t.imageUrl="")})},closePopupDialog:function(){var t=this;this.resetForm("addPopupForm"),n()(this.addPopupForm).forEach(function(e){"dateTime"==e?t.addPopupForm.dateTime=[]:"advertList"==e?t.addPopupForm.advertList=[{advertid:"",jumplink:"",imgurl:""}]:t.addPopupForm[e]=""}),console.log(this.addPopupForm)},handleSizeChange:function(t){this.defaultParams.pageSize=t,this.$store.dispatch("changeBannerMaterialList",this.defaultParams)},handleCurrentChange:function(t){this.defaultParams.pageNum=t,this.$store.dispatch("changeBannerMaterialList",this.defaultParams)},getDialogList:function(t){var e=this;this.Api.maAdverList({positionId:"1001003",deviceType:t,pageSize:10,pageNum:1}).then(function(a){200==a.data.code?(e.loading=!1,1==t?e.allDialogList=a.data.data:e.iosDialogList=a.data.data):(e.loading=!1,e.$message.error(a.data.msg))})},addPopupDialogOpen:function(){this.addPopupDialog=!0},addMaterialList:function(t){this.addMaterialListDialog=!0},editMaterial:function(t,e){this.addMaterialListDialog=!0,this.addMaterialForm=JSON.parse(l()(e))},deletDetail:function(t){var e=this;this.$confirm('此操作将删除素材 "'+t.filename+'，" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.Api.maDelAdvert({advertId:t.advertid,detailId:t.detailid}).then(function(t){200==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.$store.dispatch("changeBannerMaterialList",e.defaultParams)):e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sureSaveMaterial:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=String(new Date(e.addMaterialForm.starttime)),i=String(new Date(e.addMaterialForm.endtime)),r={positionid:1001003,icontext:e.addMaterialForm.icontext,devicetype:e.addMaterialForm.devicetype,jumptype:e.addMaterialForm.jumptype,jumplink:e.addMaterialForm.jumplink,fileid:e.addMaterialForm.fileid,relid:e.addMaterialForm.relid,detailid:e.addMaterialForm.detailid||"",starttime:a,endtime:i};e.addMaterialForm.advertid&&(r.advertid=e.addMaterialForm.advertid),e.Api.maSaveAdvert(r).then(function(t){200==t.data.code?(e.$message.success("保存成功"),e.getDialogList(e.addMaterialForm.devicetype),e.addMaterialListDialog=!1):e.$message.error(t.data.msg)})})},handleAvatarSuccess:function(t,e){var a=this;this.$message.success("上传成功"),this.imageUrl=URL.createObjectURL(e.raw);var i=new Image;i.src=this.imageUrl,i.onload=function(){a.addMaterialForm.imgmeasure=i.width+"*"+i.height,a.addMaterialForm.imgsize=(e.size/1024).toFixed(2)+"KB",a.addMaterialForm.imgurl=a.imageUrl,a.addMaterialForm.fileid=t.data.id,console.log(a.addMaterialForm.fileid)},this.loaded=!1},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<1;return e?a?(this.loaded=!0,e&&a):(this.$message.error("上传图片大小不能超过1MB!"),void(this.loaded=!1)):(this.$message.error("上传启动图只能是PNG 格式!"),void(this.loaded=!1))},handleUploading:function(t,e,a){},changeMertial:function(t){console.log(t)},addMaterialItem:function(){this.addPopupForm.advertList&&4==this.addPopupForm.advertList.length?this.$message.error("最多添加4张素材"):this.addPopupForm.advertList.push({advertid:"",jumplink:"",imgurl:""})},removeMaterialItem:function(t){for(var e=0;e<this.addPopupForm.advertList.length;e++)e==t&&this.addPopupForm.advertList.splice(t,1)},upMaterialItem:function(t){console.log("index",t);var e=this.addPopupForm.advertList[t-1];this.$set(this.addPopupForm.advertList,t-1,this.addPopupForm.advertList[t]),this.$set(this.addPopupForm.advertList,t,e)},downMaterialItem:function(t){var e=this.addPopupForm.advertList[t+1];this.$set(this.addPopupForm.advertList,t+1,this.addPopupForm.advertList[t]),this.$set(this.addPopupForm.advertList,t,e)},sureSavePopup:function(t){for(var e=this,a=String(new Date(this.addPopupForm.starttime)),i=String(new Date(this.addPopupForm.endtime)),r=[],s=0;s<this.addPopupForm.advertList.length;s++)r=r.concat({advertid:this.addPopupForm.advertList[s].advertid,priority:s+1});this.$refs[t].validate(function(t){if(!t)return!1;var s={oldIds:e.addPopupForm.oldIds||"",positionid:e.addPopupForm.positionid,userstatus:e.addPopupForm.userstatus,starttime:a,endtime:i,materialInfoStr:l()(l()(r)),detailid:e.addPopupForm.detailid||""};console.log(s),e.addMaterialForm.advertid&&(s.advertid=e.addMaterialForm.advertid),e.Api.maSaveBannerAndIcon(s).then(function(t){200==t.data.code?(e.getDialogList(e.addPopupForm.devicetype),e.$message.success("保存成功"),e.addPopupDialog=!1):e.$message.error(t.data.msg)})})},checkAllStatus:function(t){console.log(t.name),this.getDialogList(t.name,this.userStatus)},editHomeDialog:function(t,e){console.log("===>row"),console.log(e),this.addPopupForm=r()(this.addPopupForm,e),this.addPopupDialog=!0},deletHomeDialog:function(t,e){var a=this;this.$confirm("此操作将永久删除弹窗 ，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){a.Api.maDelBannerAndIcon({oldIds:e.oldIds,detailId:item.detailid}).then(function(t){if(200==t.data.code)switch(a.$message({type:"success",message:"删除成功!"}),e.devicetype){case 0:a.getDialogList("0",a.allactiveName);break;case 1:a.getDialogList("1",a.andactiveName);break;case 2:a.getDialogList("2",a.iosactiveName)}})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},created:function(){this.init()},mounted:function(){},watch:{},filters:{jumpType:function(t){switch(t){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}}}}),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"supension-view"},[a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("div",{staticClass:"card-div"},[a("div",{staticClass:"plugins-tips"},[t._v("\n                为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n            ")]),t._v(" "),[a("div",[a("div",{staticClass:"figure-title"},[t._v("Android_悬浮窗")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.allDialogList,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"icontext",label:"文件名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jumplink",label:"跳转链接",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片预览",width:"100",prop:"imgurl"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"left_imgContent"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.row.imgurl,alt:e.row.imgurl},slot:"reference"})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",width:"160",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editMaterial(e.$index,e.row)}}},[t._v("编辑\n                            ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                "+t._s(1==e.row.status?"停用":"启用"))])]}}])})],1)],t._v(" "),[a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"figure-title"},[t._v("IOS_悬浮窗")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.iosDialogList,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"icontext",label:"文件名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"jumplink",label:"跳转链接",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片预览",width:"100",prop:"imgurl"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"left_imgContent"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.row.imgurl,alt:e.row.imgurl},slot:"reference"})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",width:"160",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editMaterial(e.$index,e.row)}}},[t._v("编辑\n                            ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                "+t._s(1==e.row.status?"停用":"启用"))])]}}])})],1)]],2)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑悬浮窗",width:"40%",center:"",visible:t.addMaterialListDialog},on:{"update:visible":function(e){t.addMaterialListDialog=e},closed:t.closeDialog}},[a("div",{staticClass:"dialog-tips"},[a("i",{staticClass:"el-icon-info"}),t._v(" 为保障用户体验，悬浮窗图片统一为PNG、jpg、gif格式，大小不超过1M。")]),t._v(" "),a("el-form",{ref:"addMaterialForm",attrs:{model:t.addMaterialForm,rules:t.addMaterialRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"文件名称",prop:"icontext"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addMaterialForm.icontext,callback:function(e){t.$set(t.addMaterialForm,"icontext",e)},expression:"addMaterialForm.icontext"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"打开方式",prop:"jumptype"}},[a("el-select",{attrs:{placeholder:"请选择打开方式"},model:{value:t.addMaterialForm.jumptype,callback:function(e){t.$set(t.addMaterialForm,"jumptype",e)},expression:"addMaterialForm.jumptype"}},t._l(t.optionsOpen,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.addMaterialForm.starttime,callback:function(e){t.$set(t.addMaterialForm,"starttime",e)},expression:"addMaterialForm.starttime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.addMaterialForm.endtime,callback:function(e){t.$set(t.addMaterialForm,"endtime",e)},expression:"addMaterialForm.endtime"}})],1),t._v(" "),1==t.addMaterialForm.jumptype||2==t.addMaterialForm.jumptype?a("el-form-item",{attrs:{label:"跳转链接",prop:"jumplink"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addMaterialForm.jumplink,callback:function(e){t.$set(t.addMaterialForm,"jumplink",e)},expression:"addMaterialForm.jumplink"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,drag:t.canDrag,disabled:t.loaded,"with-credentials":t.actionWidth,"show-file-list":!1,"on-progress":t.handleUploading,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.addMaterialForm.imgurl?a("img",{staticClass:"avatar",attrs:{src:t.addMaterialForm.imgurl||""}}):t._e(),t._v(" "),a("i",{staticClass:"el-icon-upload"}),t._v(" "),t.loaded?a("div",{staticClass:"el-up-loading"},[a("i",{staticClass:"el-icon-loading"}),a("br"),t._v("拼命上传中")]):t._e(),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1MB")])])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addMaterialListDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureSaveMaterial("addMaterialForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,u,!1,function(t){a("6xQZ"),a("tkJF")},"data-v-3c1b8a52",null);e.default=m.exports},Ze1t:function(t,e){},hpkB:function(t,e){},pEDK:function(t,e){},tkJF:function(t,e){},xJwV:function(t,e){},zWKp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("G0J2"),r=a("5BH6"),s=a("4n48"),l=a("SY5z"),o=(a("3f40"),a("4qOc"),a("+cgv"),{name:"Material",data:function(){return{content:"",editorOption:{placeholder:"Hello World"},activeName:"first",subTab:[{index:"StartFigure",title:"启动图管理"},{index:"markdown",title:"首页弹窗"},{index:"upload",title:"首页悬浮窗"},{index:"charts",title:"banner图管理"},{index:"table",title:"icon管理"}],options:[{value:1,label:"全部用户"},{value:2,label:"未提交申请"},{value:3,label:"已提交，等待审核"},{value:4,label:"开户未动用"},{value:5,label:"首贷成功用户"},{value:6,label:"还款未复贷"},{value:7,label:"复贷成功用户"}],optionsOpen:[{value:1,label:"默认"},{value:2,label:"内部打开"},{value:3,label:"外部打开"},{value:4,label:"打开App伪协议"}],selectTab:"启动图管理",startfigureList:[]}},components:{quillEditor:i.quillEditor,vStart:r.default,vHomeDialog:s.default,vHomeSuspension:l.default},methods:{handleClick:function(t,e){this.selectTab=t.label},onEditorChange:function(t){t.editor;var e=t.html;t.text;this.content=e},submit:function(){console.log(this.content),this.$message.success("提交成功！")},handleAvatarSuccess:function(t){console.log(t)},editDetail:function(t){t.editing=!1},publish:function(t){t.editing=!0},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png",a=t.size/1024<500;return console.log(t),e||this.$message.error("上传启动图图片只能是 JPG或者PNG 格式!"),a||this.$message.error("上传启动图图片大小不能超过 500KB!"),e&&a},init:function(){this.$store.dispatch("changeStartFigureList","1003001")}},mounted:function(){},created:function(){this.init()}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"启动图管理",name:"first"}},[a("v-start")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"首页弹窗",name:"second"}},[a("v-homeDialog")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"首页悬浮窗",name:"third"}},[a("v-homeSuspension")],1),t._v(" "),a("el-tab-pane",{attrs:{label:"banner图管理",name:"fourth"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"icon管理",name:"fiveth"}})],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(o,n,!1,function(t){a("Ze1t"),a("LHIt")},"data-v-65e670fa",null);e.default=d.exports}});