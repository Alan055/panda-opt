webpackJsonp([15],{"4n48":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),l=a.n(i),s=a("fZjL"),o=a.n(s),r=a("G0J2"),n=(a("fMLZ"),{name:"StartFigure",data:function(){var t=this;return{addPopText:"",addMaterialText:"",allactiveName:"1",andactiveName:"1",iosactiveName:"1",allDialogListParams:{pageSize:10,pageNum:1},andDialogListParams:{pageSize:10,pageNum:1},iosDialogListParams:{pageSize:10,pageNum:1},actionWidth:!0,bigImgUrlDialog:!1,canDrag:!0,imgPercent:0,loaded:!1,loading:!0,bigImgUrl:"",content:"",addMaterialRules:{icontext:[{required:!0,message:"请输入素材名称"}],jumptype:[{required:!0,message:"请选择打开方式"}]},pictureLimit:1,canEdit:!1,imageUrl:"",androidDialogList:[],iosDialogList:[],allDialogList:[],materialList:[],addMaterialListDialog:!1,addMaterialForm:{advertid:"",icontext:"",jumptype:"",jumplink:"",fileid:"",imgurl:""},defaultParams:{pageSize:10,pageNum:1},addPopupDialog:!1,addPopupForm:{oldIds:"",positionid:"",userstatus:"",starttime:"",devicetype:"",endtime:"",advertid:"",priority:"",frequency:"",advertList:[{advertid:"",jumplink:"",imgurl:""}]},addPopupFormRules:{jumptype:[{required:!0,message:"请选择跳转方式",trigger:"change"}],frequency:[{required:!0,message:"请选择弹窗频率",trigger:"change"}],userstatus:[{required:!0,message:"请选择用户状态",trigger:"change"}],devicetype:[{required:!0,message:"选择投放平台",trigger:"change"}],starttime:[{required:!0,message:"请选择开始时间"},{validator:function(e,a,i){""===a?i(new Error("请输入开始时间")):(""!==t.addPopupForm.endtime&&t.$refs.addPopupForm.validateField("endtime"),i())},trigger:"change"}],endtime:[{required:!0,message:"请选择结束时间"},{validator:function(e,a,i){""===a?i(new Error("请输入结束时间")):a<t.addPopupForm.starttime?i(new Error("结束时间不能小于开始时间!")):i()},trigger:"change"}]},checkedType:""}},components:{quillEditor:r.quillEditor},computed:{userStatusList:function(){return console.log(this.$store.state.userStatusList),this.$store.state.userStatusList},dialogMaterialList:function(){return console.log("1112333333333"),console.log(this.$store.state.dialogMaterialList.list),this.$store.state.dialogMaterialList},optionsOpen:function(){return this.$store.state.optionsOpen},optionDeviceType:function(){return this.$store.state.optionDeviceType},optionDefault:function(){return this.$store.state.optionDefault},actionUrl:function(){return this.$store.state.actionUrl},optionFrequency:function(){return this.$store.state.optionFrequency},dialogMaterialListAll:function(){return this.$store.state.dialogMaterialListAll},getAdvertImgurl:function(){return function(t){var e=this.$store.state.dialogMaterialListAll.list;if(e)for(var a=0;a<e.length;a++)if(e[a].advertid==t)return e[a].imgurl}},getAdvertJumplink:function(){return function(t){var e=this.$store.state.dialogMaterialListAll.list;if(e)for(var a=0;a<e.length;a++)if(e[a].advertid==t)return e[a].jumplink}}},methods:{init:function(){this.getDialogList("1",1),this.getDialogList("2",1),this.getDialogList("0",1),this.$store.dispatch("changeGetUserStatusList"),this.$store.dispatch("changeDialogMaterialList",this.defaultParams)},formatJumptype:function(t,e){for(var a=0;a<this.optionsOpen.length;a++)if(t.jumptype==this.optionsOpen[a].value)return this.optionsOpen[a].label},filterJumptype:function(t,e){switch(t.jumptype){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}},formatStatus:function(t,e){return 0==t.status?"已停用":"已启用"},formatDate:function(t,e){return t.starttime+" 至 "+t.endtime},onEditorChange:function(t){t.editor;var e=t.html;t.text;this.content=e},closeDialog:function(){var t=this;this.resetForm("addMaterialForm"),o()(this.addMaterialForm).forEach(function(e){"dateTime"==e?t.addMaterialForm.dateTime=[]:(t.addMaterialForm[e]="",t.imageUrl="")})},resetForm:function(t){this.$refs[t].resetFields()},closePopupDialog:function(){var t=this;this.resetForm("addPopupForm"),o()(this.addPopupForm).forEach(function(e){"dateTime"==e?t.addPopupForm.dateTime=[]:"advertList"==e?t.addPopupForm.advertList=[{advertid:"",jumplink:"",imgurl:""}]:t.addPopupForm[e]=""}),console.log(this.addPopupForm)},handleSizeChangeAll:function(t){this.allDialogListParams.pageSize=t,this.getDialogList("0",this.allactiveName)},handleCurrentChangeAll:function(t){this.allDialogListParams.pageNum=t,this.getDialogList("0",this.allactiveName)},handleSizeChangeAnd:function(t){this.andDialogListParams.pageSize=t,this.getDialogList("1",this.andactiveName)},handleCurrentChangeAnd:function(t){this.andDialogListParams.pageNum=t,this.getDialogList("1",this.andactiveName)},handleSizeChangeIos:function(t){this.iosDialogListParams.pageSize=t,this.getDialogList("2",this.iosactiveName)},handleCurrentChangeIos:function(t){this.iosDialogListParams.pageNum=t,this.getDialogList("2",this.iosactiveName)},handleSizeChange:function(t){this.defaultParams.pageSize=t,this.$store.dispatch("changeDialogMaterialList",this.defaultParams)},handleCurrentChange:function(t){this.defaultParams.pageNum=t,this.$store.dispatch("changeDialogMaterialList",this.defaultParams)},handleStop:function(t,e){var a=this,i=1==e.status?"停用":"启用";this.$confirm("此操作将"+i+"首页弹窗"+e.icontext+"，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.Api.maUpdateStatus({oldIds:e.oldIds,status:1==e.status?"0":"1",detailid:e.detailid||""}).then(function(t){if(200==t.data.code)switch(a.$message({type:"success",message:i+"成功!"}),e.devicetype){case 0:a.getDialogList("0",a.allactiveName);break;case 1:a.getDialogList("1",a.andactiveName);break;case 2:a.getDialogList("2",a.iosactiveName)}else a.$message.error(t.data.msg)})}).catch(function(){a.$message({type:"info",message:"已取消"+i})})},getDialogList:function(t,e){var a=this,i={positionId:1021001,deviceType:t,userStatus:e||"1",pageSize:10,pageNum:1};0==t?(i.pageSize=this.allDialogListParams.pageSize,i.pageNum=this.allDialogListParams.pageNum):1==t?(i.pageSize=this.andDialogListParams.pageSize,i.pageNum=this.andDialogListParams.pageNum):2==t&&(i.pageSize=this.iosDialogListParams.pageSize,i.pageNum=this.iosDialogListParams.pageNum),this.Api.maGetBannerList(i).then(function(e){200==e.data.code?1==t?(a.androidDialogList=e.data.data,console.log(e.data.data.list),a.loading=!1):2==t?(a.loading=!1,a.iosDialogList=e.data.data):(a.loading=!1,a.allDialogList=e.data.data):(a.loading=!1,a.$message.error(e.data.msg))})},addPopupDialogOpen:function(){this.addPopText="添加首页弹窗",this.addPopupDialog=!0},addMaterialList:function(t){this.addMaterialListDialog=!0,this.addMaterialText="添加首页弹窗素材"},editMaterial:function(t){this.addMaterialListDialog=!0,this.addMaterialText="编辑首页弹窗素材",this.addMaterialForm=JSON.parse(l()(t))},deletDetail:function(t){var e=this;this.$confirm('此操作将删除素材 "'+t.icontext+'"， 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.Api.maDelMaterial({advertId:t.advertid}).then(function(t){200==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.$store.dispatch("changeDialogMaterialList",e.defaultParams)):e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sureSaveMaterial:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a={icontext:e.addMaterialForm.icontext,jumptype:e.addMaterialForm.jumptype,jumplink:e.addMaterialForm.jumplink,fileid:e.addMaterialForm.fileid,materialtype:"3"};e.addMaterialForm.advertid&&(a.advertid=e.addMaterialForm.advertid),e.Api.maSaveMaterial(a).then(function(t){200==t.data.code?(e.$message.success("保存成功"),e.$store.dispatch("changeDialogMaterialList",e.defaultParams),e.addMaterialListDialog=!1):e.$message.error(t.data.msg)})})},handleAvatarSuccess:function(t,e){var a=this;this.$message.success("上传成功"),this.imageUrl=URL.createObjectURL(e.raw);var i=new Image;i.src=this.imageUrl,i.onload=function(){a.addMaterialForm.imgmeasure=i.width+"*"+i.height,a.addMaterialForm.imgsize=(e.size/1024).toFixed(2)+"KB",a.addMaterialForm.imgurl=a.imageUrl,a.addMaterialForm.fileid=t.data.id,console.log(a.addMaterialForm.fileid)},this.loaded=!1},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<1;return e?a?(this.loaded=!0,e&&a):(this.$message.error("上传图片大小不能超过1MB!"),void(this.loaded=!1)):(this.$message.error("上传启动图只能是PNG 格式!"),void(this.loaded=!1))},handleUploading:function(t,e,a){},changeMertial:function(t){console.log(t)},addMaterialItem:function(){this.addPopupForm.advertList&&4==this.addPopupForm.advertList.length?this.$message.error("最多添加4张素材"):this.addPopupForm.advertList.push({advertid:"",jumplink:"",imgurl:""})},removeMaterialItem:function(t){for(var e=0;e<this.addPopupForm.advertList.length;e++)e==t&&this.addPopupForm.advertList.splice(t,1)},upMaterialItem:function(t){console.log("index",t);var e=this.addPopupForm.advertList[t-1];this.$set(this.addPopupForm.advertList,t-1,this.addPopupForm.advertList[t]),this.$set(this.addPopupForm.advertList,t,e)},downMaterialItem:function(t){var e=this.addPopupForm.advertList[t+1];this.$set(this.addPopupForm.advertList,t+1,this.addPopupForm.advertList[t]),this.$set(this.addPopupForm.advertList,t,e)},sureSavePopup:function(t){var e=this,a=String(new Date(this.addPopupForm.starttime)),i=String(new Date(this.addPopupForm.endtime));this.$refs[t].validate(function(t){if(!t)return!1;for(var s=[],o=0;o<e.addPopupForm.advertList.length;o++){if(!e.addPopupForm.advertList[o].advertid)return void e.$message.error("请选择素材！");s=s.concat({advertid:e.addPopupForm.advertList[o].advertid,priority:o+1})}var r={oldIds:e.addPopupForm.oldIds||"",positionid:"1021001",devicetype:e.addPopupForm.devicetype,userstatus:e.addPopupForm.userstatus,starttime:a,endtime:i,materialInfoStr:l()(l()(s)),frequency:e.addPopupForm.frequency,detailid:e.addPopupForm.detailid||""};console.log(r),e.addMaterialForm.advertid&&(r.advertid=e.addMaterialForm.advertid),e.Api.maSaveBannerAndIcon(r).then(function(t){if(200==t.data.code){switch(e.addPopupForm.devicetype!=e.checkedType&&e.getDialogList(e.checkedType,e.allactiveName),e.addPopupForm.devicetype){case 0:e.getDialogList("0",e.allactiveName);break;case 1:e.getDialogList("1",e.andactiveName);break;case 2:e.getDialogList("2",e.iosactiveName)}e.$message.success("保存成功"),e.addPopupDialog=!1}else e.$message.error(t.data.msg)})})},checkAllStatus:function(t){console.log(t.name),this.allactiveName=t.name,this.getDialogList("0",t.name)},checkAndStatus:function(t){this.andactiveName=t.name,this.getDialogList("1",t.name)},checkIosStatus:function(t){this.iosactiveName=t.name,this.getDialogList("2",t.name)},checkDeviceType:function(t){this.checkedType=t.name},editHomeDialog:function(t,e){console.log("===>row"),console.log(e),this.addPopText="编辑首页弹窗",this.addPopupForm=JSON.parse(l()(e)),this.addPopupDialog=!0},deletHomeDialog:function(t,e){var a=this;this.$confirm("此操作将永久删除弹窗 ，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){a.Api.maDelBannerAndIcon({oldIds:e.oldIds,detailId:e.detailid}).then(function(t){if(200==t.data.code)switch(a.$message({type:"success",message:"删除成功!"}),e.devicetype){case 0:a.getDialogList("0",a.allactiveName);break;case 1:a.getDialogList("1",a.andactiveName);break;case 2:a.getDialogList("2",a.iosactiveName)}})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},created:function(){this.init()},mounted:function(){},watch:{},filters:{jumpType:function(t){switch(t){case 1:return"内部打开h5链接";case 2:return"外部打开h5链接";case 3:return"仅展示不跳转"}}}}),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homeDialog-view"},[a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("div",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.checkDeviceType}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addPopupDialogOpen}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗\n                        ")])]),t._v(" "),[a("el-tabs",{staticClass:"second-tabs",attrs:{"tab-position":"top"},on:{"tab-click":t.checkAllStatus},model:{value:t.allactiveName,callback:function(e){t.allactiveName=e},expression:"allactiveName"}},t._l(t.userStatusList,function(e){return a("el-tab-pane",{key:e.code,attrs:{label:e.desc,name:e.code}},[a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗/全部-"+t._s(e.desc))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.allDialogList.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"弹窗"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userstatusname",label:"用户状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"frequencyname",label:"弹窗频率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片内容",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"tab-imgContent"},[a("div",{staticClass:"left"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.icontext))]),t._v(" "),a("el-tooltip",{attrs:{content:e.jumplink,placement:"bottom",effect:"light"}},[a("p",[t._v(t._s(e.jumplink))])])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editHomeDialog(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                                "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deletHomeDialog(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.allDialogList.total},on:{"size-change":t.handleSizeChangeAll,"current-change":t.handleCurrentChangeAll}})],1)}))]],2),t._v(" "),a("el-tab-pane",{attrs:{name:"1",label:"Android_弹窗"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addPopupDialogOpen}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗\n                        ")])]),t._v(" "),[a("el-tabs",{staticClass:"second-tabs",attrs:{"tab-position":"top"},on:{"tab-click":t.checkAndStatus},model:{value:t.andactiveName,callback:function(e){t.andactiveName=e},expression:"andactiveName"}},t._l(t.userStatusList,function(e){return a("el-tab-pane",{key:e.code,attrs:{label:e.desc,name:e.code}},[a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗/Android-"+t._s(e.desc))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.androidDialogList.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"弹窗"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userstatusname",label:"用户状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"frequencyname",label:"弹窗频率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片内容",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"tab-imgContent"},[a("div",{staticClass:"left"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.icontext))]),t._v(" "),a("el-tooltip",{attrs:{content:e.jumplink,placement:"bottom",effect:"light"}},[a("p",[t._v(t._s(e.jumplink))])])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editHomeDialog(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                                "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deletHomeDialog(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.androidDialogList.total},on:{"size-change":t.handleSizeChangeAnd,"current-change":t.handleCurrentChangeAnd}})],1)}))]],2),t._v(" "),a("el-tab-pane",{attrs:{name:"2",label:"IOS_弹窗"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addPopupDialogOpen}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗\n                        ")])]),t._v(" "),a("el-tabs",{staticClass:"second-tabs",attrs:{"tab-position":"top"},on:{"tab-click":t.checkIosStatus},model:{value:t.iosactiveName,callback:function(e){t.iosactiveName=e},expression:"iosactiveName"}},t._l(t.userStatusList,function(e){return a("el-tab-pane",{key:e.code,attrs:{label:e.desc,name:e.code}},[a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗/IOS-"+t._s(e.desc))])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.iosDialogList.list,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"弹窗"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userstatusname",label:"用户状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"frequencyname",label:"弹窗频率"}}),t._v(" "),a("el-table-column",{attrs:{prop:"starttime",width:"300",label:"生效时间",formatter:t.formatDate}}),t._v(" "),a("el-table-column",{attrs:{label:"图片内容",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.advertList,function(e,i){return a("div",{key:i,staticClass:"tab-imgContent"},[a("div",{staticClass:"left"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.imgurl,alt:e.imgurl},slot:"reference"})])],1),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(e.icontext))]),t._v(" "),a("el-tooltip",{attrs:{content:e.jumplink,placement:"bottom",effect:"light"}},[a("p",[t._v(t._s(e.jumplink))])])],1)])})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.formatStatus,label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editHomeDialog(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleStop(e.$index,e.row)}}},[t._v("\n                                            "+t._s(1==e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.deletHomeDialog(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.iosDialogList.total},on:{"size-change":t.handleSizeChangeIos,"current-change":t.handleCurrentChangeIos}})],1)}))],1),t._v(" "),a("el-tab-pane",{attrs:{label:"弹窗素材管理"}},[a("div",{staticClass:"plugins-tips"},[t._v("\n                        为保障用户体验，首页弹窗图统一为PNG、jpg、gif格式，建议尺寸560*760，大小不超过1M。\n                        "),a("div",{staticClass:"add-btn",on:{click:t.addMaterialList}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增首页弹窗素材\n                        ")])]),t._v(" "),a("div",[a("div",{staticClass:"figure-title"},[t._v("首页弹窗素材")])]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dialogMaterialList.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"icontext",label:"素材名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"图片预览",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"tab-imgContent"},[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"700px","max-height":"700px"},attrs:{src:e.row.imgurl}}),t._v(" "),a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{slot:"reference",src:e.row.imgurl,alt:e.row.imgurl},slot:"reference"})])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"jumplink",label:"跳转链接"}}),t._v(" "),a("el-table-column",{attrs:{prop:"junmtype",label:"打开方式",formatter:t.filterJumptype}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editMaterial(e.row)}}},[t._v("编辑\n                                ")]),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){t.deletDetail(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.dialogMaterialList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.addPopText,width:"40%",center:"",visible:t.addPopupDialog},on:{"update:visible":function(e){t.addPopupDialog=e},closed:t.closePopupDialog}},[a("el-form",{ref:"addPopupForm",attrs:{model:t.addPopupForm,rules:t.addPopupFormRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"平台分类",prop:"devicetype"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"选择投放平台"},model:{value:t.addPopupForm.devicetype,callback:function(e){t.$set(t.addPopupForm,"devicetype",e)},expression:"addPopupForm.devicetype"}},t._l(t.optionDeviceType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"用户状态",prop:"userstatus"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"选择用户状态"},model:{value:t.addPopupForm.userstatus,callback:function(e){t.$set(t.addPopupForm,"userstatus",e)},expression:"addPopupForm.userstatus"}},t._l(t.userStatusList,function(t){return a("el-option",{key:Number(t.code),attrs:{label:t.desc,value:Number(t.code)}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"弹窗频率",prop:"frequency"}},[a("el-select",{attrs:{autocomplete:"off",placeholder:"选择提示频率"},model:{value:t.addPopupForm.frequency,callback:function(e){t.$set(t.addPopupForm,"frequency",e)},expression:"addPopupForm.frequency"}},t._l(t.optionFrequency,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"starttime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择开始时间"},model:{value:t.addPopupForm.starttime,callback:function(e){t.$set(t.addPopupForm,"starttime",e)},expression:"addPopupForm.starttime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"endtime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择结束时间"},model:{value:t.addPopupForm.endtime,callback:function(e){t.$set(t.addPopupForm,"endtime",e)},expression:"addPopupForm.endtime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配置图片内容","label-width":"100px"}}),t._v(" "),a("el-form-item",{attrs:{labelWidth:"0px"}},t._l(t.addPopupForm.advertList,function(e,i){return a("el-row",{key:i,staticClass:"dialog-advertItem",attrs:{gutter:20}},[a("el-col",{staticClass:"dialog-advertItem-left",attrs:{span:18}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{size:"mini",filterable:""},on:{change:t.changeMertial},model:{value:e.advertid,callback:function(a){t.$set(e,"advertid",a)},expression:"key.advertid"}},t._l(t.dialogMaterialListAll.list,function(t){return a("el-option",{key:t.advertid,attrs:{label:t.icontext,value:t.advertid}})}))],1),t._v(" "),a("el-col",{staticClass:"dialog-advertItem-img",attrs:{span:6}},[a("img",{attrs:{src:t.getAdvertImgurl(e.advertid)}})]),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{size:"mini",value:t.getAdvertJumplink(e.advertid),readonly:""}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[i==t.addPopupForm.advertList.length-1?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.addMaterialItem}}):t._e(),t._v(" "),t.addPopupForm.advertList.length>1?a("el-button",{attrs:{type:"danger",icon:"el-icon-minus",circle:""},on:{click:function(e){t.removeMaterialItem(i)}}}):t._e(),t._v(" "),i>0&&t.addPopupForm.advertList.length>1?a("el-button",{attrs:{type:"warning",icon:"el-icon-upload2",circle:""},on:{click:function(e){t.upMaterialItem(i)}}}):t._e(),t._v(" "),t.addPopupForm.advertList.length>1&&i!=t.addPopupForm.advertList.length-1?a("el-button",{attrs:{type:"warning",icon:"el-icon-download",circle:""},on:{click:function(e){t.downMaterialItem(i)}}}):t._e()],1)],1)}))],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addPopupDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureSavePopup("addPopupForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.addMaterialText,width:"40%",center:"",visible:t.addMaterialListDialog},on:{"update:visible":function(e){t.addMaterialListDialog=e},closed:t.closeDialog}},[a("div",{staticClass:"dialog-tips"},[a("i",{staticClass:"el-icon-info"}),t._v(" 为保障用户体验，素材图统一为PNG、jpg、gif格式，大小不超过1M。")]),t._v(" "),a("el-form",{ref:"addMaterialForm",attrs:{model:t.addMaterialForm,rules:t.addMaterialRules,"label-width":"100px",size:"mini"}},[a("el-form-item",{attrs:{label:"素材名称",prop:"icontext"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addMaterialForm.icontext,callback:function(e){t.$set(t.addMaterialForm,"icontext",e)},expression:"addMaterialForm.icontext"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"打开方式",prop:"jumptype"}},[a("el-select",{attrs:{placeholder:"请选择打开方式"},model:{value:t.addMaterialForm.jumptype,callback:function(e){t.$set(t.addMaterialForm,"jumptype",e)},expression:"addMaterialForm.jumptype"}},t._l(t.optionsOpen,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),1==t.addMaterialForm.jumptype||2==t.addMaterialForm.jumptype?a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.addMaterialForm.jumplink,callback:function(e){t.$set(t.addMaterialForm,"jumplink",e)},expression:"addMaterialForm.jumplink"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.actionUrl,drag:t.canDrag,disabled:t.loaded,"with-credentials":t.actionWidth,"show-file-list":!1,"on-progress":t.handleUploading,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.addMaterialForm.imgurl?a("img",{staticClass:"avatar",attrs:{src:t.addMaterialForm.imgurl||""}}):t._e(),t._v(" "),a("i",{staticClass:"el-icon-upload"}),t._v(" "),t.loaded?a("div",{staticClass:"el-up-loading"},[a("i",{staticClass:"el-icon-loading"}),a("br"),t._v("拼命上传中")]):t._e(),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1MB")])])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addMaterialListDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.sureSaveMaterial("addMaterialForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,d,!1,function(t){a("xJwV"),a("DsOU")},"data-v-9d082d10",null);e.default=c.exports},DsOU:function(t,e){},xJwV:function(t,e){}});