webpackJsonp([33],{"2brn":function(t,e){},"7oz/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),s=a.n(i),o=a("T0gc"),l=a("KvOm"),n=a("7MUq"),r={components:{myTable:o.a},mixins:[l.c],data:function(){return{tableData:[{}],showModal:!1,Modal_isNew:!0,modalData:{},modalDataRule:{title:[{required:!0,message:"请输入标题",trigger:"change"},{max:30,message:"最多输入30个字符",trigger:"change"}],summary:[{required:!0,message:"请输入摘要",trigger:"change"}],img:[{required:!0,message:"请上传图片",trigger:"change"}],jumpURL:[{required:!0,message:"请输入跳转链接",trigger:"change"}]},loaded:!1}},computed:{actionUrl:function(){return this.$store.state.actionUrl}},watch:{},methods:{deleteRow:function(t){var e=this;this.$confirm("是否删除该数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.Api.loDeleteLinkListById({advertid:t}).then(function(t){var a=t.data;200===a.code?(e.$message({type:"success",message:"删除成功！"}),e.init()):e.$message({type:"error",message:a.msg})}).catch(function(t){e.$message({type:"error",message:t})})}).catch(function(){e.$message({type:"info",message:"已取消删除！"})})},online_offline:function(){var t=this;this.$confirm("确定上线吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.Api.loDeleteLinkListById({advertid:id}).then(function(e){var a=e.data;200===a.code?(t.$message({type:"success",message:"删除成功！"}),t.init()):t.$message({type:"error",message:a.msg})}).catch(function(e){t.$message({type:"error",message:e})})}).catch(function(){t.$message({type:"info",message:"已取消删除！"})})},openModal:function(t){this.Modal_isNew=void 0==t,this.modalData=t||{title:"",summary:"",jumpURL:"",img:null},this.showModal=!0},beforeAvatarUpload1:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<1;return e?a?(this.loaded=!0,e&&a):(this.$message.error("上传图片大小不能超过1MB!"),void(this.loaded=!1)):(this.$message.error("上传启动图只能是PNG或JPG 格式!"),void(this.loaded=!1))},handleAvatarSuccess1:function(t){var e=this;if(200===t.code){this.imageUrl1=URL.createObjectURL(t.raw);var a=new Image;a.src=this.imageUrl1,a.onload=function(){e.modalData.img={},e.modalData.img.imgmeasure=a.width+"*"+a.height,e.modalData.img.imgsize=(t.size/1024).toFixed(2)+"KB",e.modalData.img.imgurl=e.imageUrl1,e.modalData.img.fileid=res.data.id,e.modalData.img.filename=t.name,console.log(e.modalData)}}else this.$message.warning(t.msg);this.loaded=!1},submit:n.a.throttle(function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=localStorage.getItem("ms_username"),i={updateby:a,productid:localStorage.getItem("productId")};!e.currentAddData.advertid&&(i.createby=a),e.currentAddData.jumplink=e.myUrl+"#/scan/"+e.currentAddData.advertid+"/"+e.currentAddData.title,e.Api.loSaveContractLinkListById(s()({materialtype:4},e.currentAddData,i)).then(function(t){var a=t.data;200===a.code?(e.$message({type:"success",message:e.currentAddData.advertid?"编辑成功！":"添加成功！"}),e.removeTab(e.editableTabsValue)):e.$message({type:"error",message:a.msg})}).catch(function(t){e.$message({type:"error",message:t})})})}),init:function(){}},created:function(){this.init()},mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MediaReport_view"},[a("div",{staticClass:"newAdd"},[a("span",{staticClass:"add-btn",on:{click:function(e){t.openModal()}}},[a("i",{staticClass:"el-icon-lx-roundadd"}),t._v("新增报道\n    ")])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.exportLoading,expression:"exportLoading"}]},[a("myTable",{attrs:{tableData:t.tableData,pagination:t.pagination,ajax:t.init},on:{"update:pagination":function(e){t.pagination=e}}},[a("el-table-column",{attrs:{fixed:"",prop:"index",label:"序号",type:"index",index:t.indexMethod}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"imgurl",label:"摘要图片"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"updatetime",label:"最近修改时间"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"updateby",label:"最后修改人"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.openModal(e.row)}}},[t._v("编辑\n            ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteRow(e.row.advertid)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.online_offline(e.row)}}},[t._v("上线")])]}}])})],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:(t.Modal_isNew?"新增":"编辑")+"报道",visible:t.showModal,width:"30%",center:""},on:{"update:visible":function(e){t.showModal=e}}},[a("div",[a("el-form",{ref:"modalData",staticClass:"formTop1",attrs:{inline:!0,"label-position":"left","label-width":"100px",align:"center",model:t.modalData,rules:t.modalDataRule}},[a("el-form-item",{attrs:{label:"标题：",prop:"title"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"215px"},attrs:{placeholder:"请输入标题"},model:{value:t.modalData.title,callback:function(e){t.$set(t.modalData,"title",e)},expression:"modalData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"摘要：",prop:"summary"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"215px"},attrs:{placeholder:"请输入摘要"},model:{value:t.modalData.summary,callback:function(e){t.$set(t.modalData,"summary",e)},expression:"modalData.summary"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传图片：",prop:"img"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{drag:"",action:t.actionUrl,multiple:"","on-success":t.handleAvatarSuccess1,"before-upload":t.beforeAvatarUpload1}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只支持上传jpg/png文件，尺寸****，且文件大小不超过")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转链接：",prop:"jumpURL"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"215px"},attrs:{placeholder:"请输入跳转链接"},model:{value:t.modalData.jumpURL,callback:function(e){t.$set(t.modalData,"jumpURL",e)},expression:"modalData.jumpURL"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showModal=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit("modalData")}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(r,d,!1,function(t){a("2brn")},null,null);e.default=c.exports}});