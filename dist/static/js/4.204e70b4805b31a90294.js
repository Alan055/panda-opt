webpackJsonp([4],{"3v2M":function(e,t){},GE4d:function(e,t){},"a2/v":function(e,t){},aneU:function(e,t){},b430:function(e,t){},fwjw:function(e,t){},jrMx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("G0J2"),i=(s("3f40"),s("4qOc"),s("+cgv"),s("fZjL")),o=s.n(i),a={name:"UserManager",data:function(){var e=this;return{currentPage:1,addUserDialogFormVisible:!1,editUserVisible:!1,changePswVisible:!1,addUserForm:{userName:"",password:"",surePassword:"",userList:[]},editUserForm:{userName:"",userId:"",userList:[]},pswForm:{id:"",surePassword:"",password:"",userName:""},userRules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不能小于6个字符",trigger:"blur"},{validator:function(t,s,r){""===s?r(new Error("请输入密码")):(""!==e.addUserForm.surePassword&&e.$refs.addUserForm.validateField("surePassword"),r())},trigger:"blur"}],surePassword:[{required:!0,message:"请确认密码",trigger:"blur"},{min:6,message:"确认密码不能小于6个字符",trigger:"blur"},{validator:function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.addUserForm.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],userList:[{type:"array",required:!0,message:"请至少选择一个用户组",trigger:"change"}]},editRules:{userList:[{type:"array",required:!0,message:"请至少选择一个用户组",trigger:"change"}]},pswRules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不能小于6个字符",trigger:"blur"},{validator:function(t,s,r){""===s?r(new Error("请输入密码")):(""!==e.pswForm.surePassword&&e.$refs.pswForm.validateField("surePassword"),r())},trigger:"blur"}],surePassword:[{required:!0,message:"请确认密码",trigger:"blur"},{min:6,message:"确认密码不能小于6个字符",trigger:"blur"},{validator:function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.pswForm.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]},selectId:[],userListParams:{pageSize:10,pageNum:1}}},computed:{userGroupList:function(){return this.$store.state.userGroupList},userList:function(){return this.$store.state.userList}},methods:{init:function(){},closeDialog:function(){var e=this;o()(this.addUserForm).forEach(function(t){e.addUserForm[t]="userList"==t?[]:""})},addUserDialog:function(){this.addUserDialogFormVisible=!0},editChange:function(e){console.log(e)},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.userListParams.pageSize=e,this.$store.dispatch("changeUserList",this.userListParams)},handleCurrentChange:function(e){console.log("当前页: "+e),this.userListParams.pageNum=e,this.$store.dispatch("changeUserList",this.userListParams)},handleUserList:function(e,t){var s=this;this.editUserForm.userName=t.userName,this.editUserForm.userId=t.userId,t.groupId?this.editUserForm.userList=t.groupId.split(","):this.editUserForm.userList=[],console.log(this.editUserForm.userList),setTimeout(function(){s.editUserVisible=!0})},handlePsw:function(e,t){console.log(e,t),this.pswForm.userName=t.userName,this.pswForm.password="",this.pswForm.surePassword="",this.pswForm.id=t.userId,this.changePswVisible=!0},handleStop:function(e,t){var s=this,r=1==t.status?"停用":"启用";this.$confirm("此操作将"+r+'用户 "'+t.userName+'" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){s.Api.perModUserStatus({userId:t.userId,status:1==t.status?"0":"1"}).then(function(e){200==e.data.code?(s.$message({type:"success",message:r+"成功!"}),s.$store.dispatch("changeUserList",s.userListParams)):s.$message.error(e.data.msg)})}).catch(function(){s.$message({type:"info",message:"已取消"+r})})},handleDelete:function(e,t){var s=this;this.$confirm('此操作将永久删除用户 "'+t.userName+'" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){s.Api.perDelUser({userId:t.userId}).then(function(e){200==e.data.code&&(s.$message({type:"success",message:"删除成功!"}),s.$store.dispatch("changeUserList",s.userListParams))})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},addUser:function(){for(var e=this,t="",s=0;s<this.addUserForm.userList.length;s++)t?t+=","+this.addUserForm.userList[s]:t=this.addUserForm.userList[s];this.Api.perAddUser({userName:this.addUserForm.userName,password:this.addUserForm.password,groupId:t}).then(function(t){200==t.data.code?(e.$message.success("添加用户成功"),e.addUserDialogFormVisible=!1,e.$store.dispatch("changeUserList",e.userListParams)):e.$message.error(t.data.msg)})},editUserList:function(){for(var e=this,t="",s=0;s<this.editUserForm.userList.length;s++)t?t+=","+this.editUserForm.userList[s]:t=this.editUserForm.userList[s];var r={userId:this.editUserForm.userId,groupId:t};this.Api.perUserGroupRel(r).then(function(t){200==t.data.code?(e.$message.success("修改成功"),e.editUserVisible=!1,e.$store.dispatch("changeUserList",e.userListParams)):e.$message.error(t.data.msg)})},editUserPsw:function(){var e=this;this.Api.perModUserPwd({userId:this.pswForm.id,password:this.pswForm.password}).then(function(t){200==t.data.code?(e.$message.success("修改成功"),e.$store.dispatch("changeUserList",e.userListParams),e.changePswVisible=!1):e.$message.success(t.data.msg)})},submitAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.addUser()})},submitEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.editUserList()})},submitEditPsw:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.editUserPsw()})},formatStatus:function(e,t){return 0==e.status?"停用":"正常"}},created:function(){this.init()}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"plugins-tips"},[e._v("\n        用户列表\n        "),s("div",{staticClass:"add-btn",on:{click:e.addUserDialog}},[s("i",{staticClass:"el-icon-lx-roundadd"}),e._v("添加用户\n        ")])]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList.list,stripe:""}},[s("el-table-column",{attrs:{prop:"date",type:"index",label:"序号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userName",label:"用户名称"}}),e._v(" "),s("el-table-column",{attrs:{width:"300",prop:"groupName",label:"用户组名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"status",formatter:e.formatStatus,label:"状态"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary",disabled:"admin"==t.row.userName},on:{click:function(s){e.handleUserList(t.$index,t.row)}}},[e._v("修改用户组")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success",disabled:"admin"==t.row.userName},on:{click:function(s){e.handlePsw(t.$index,t.row)}}},[e._v("修改密码")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"warning",disabled:"admin"==t.row.userName},on:{click:function(s){e.handleStop(t.$index,t.row)}}},[e._v(e._s(1==t.row.status?"停用":"启用"))]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger",disabled:"admin"==t.row.userName},on:{click:function(s){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"current-page":1,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.userList.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),s("el-dialog",{attrs:{title:"添加用户",width:"40%",center:"",visible:e.addUserDialogFormVisible},on:{"update:visible":function(t){e.addUserDialogFormVisible=t},closed:e.closeDialog}},[s("el-form",{ref:"addUserForm",attrs:{model:e.addUserForm,rules:e.userRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[s("el-input",{attrs:{placeholder:"请填写用户名",autocomplete:"off"},model:{value:e.addUserForm.userName,callback:function(t){e.$set(e.addUserForm,"userName",t)},expression:"addUserForm.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请填写密码",autocomplete:"off"},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"surePassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请确认密码",autocomplete:"off"},model:{value:e.addUserForm.surePassword,callback:function(t){e.$set(e.addUserForm,"surePassword",t)},expression:"addUserForm.surePassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户组",prop:"userList"}},[s("el-checkbox-group",{model:{value:e.addUserForm.userList,callback:function(t){e.$set(e.addUserForm,"userList",t)},expression:"addUserForm.userList"}},e._l(e.userGroupList,function(t){return s("el-checkbox",{key:t.groupId,attrs:{label:t.groupId}},[e._v(e._s(t.groupName))])}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addUserDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitAdd("addUserForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改用户组",width:"40%",center:"",visible:e.editUserVisible},on:{"update:visible":function(t){e.editUserVisible=t}}},[s("el-form",{ref:"editUserForm",attrs:{model:e.editUserForm,rules:e.editRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{disabled:"",placeholder:"请填写用户名",autocomplete:"off"},model:{value:e.editUserForm.userName,callback:function(t){e.$set(e.editUserForm,"userName",t)},expression:"editUserForm.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户组",prop:"userList"}},[s("el-checkbox-group",{on:{change:e.editChange},model:{value:e.editUserForm.userList,callback:function(t){e.$set(e.editUserForm,"userList",t)},expression:"editUserForm.userList"}},e._l(e.userGroupList,function(t){return s("el-checkbox",{key:t.groupId,attrs:{label:t.groupId}},[e._v(e._s(t.groupName))])}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editUserVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEdit("editUserForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",width:"40%",center:"",visible:e.changePswVisible},on:{"update:visible":function(t){e.changePswVisible=t}}},[s("el-form",{ref:"pswForm",attrs:{model:e.pswForm,rules:e.pswRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{disabled:"",placeholder:"请填写用户名",autocomplete:"off"},model:{value:e.pswForm.userName,callback:function(t){e.$set(e.pswForm,"userName",t)},expression:"pswForm.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入新密码",autocomplete:"off"},model:{value:e.pswForm.password,callback:function(t){e.$set(e.pswForm,"password",t)},expression:"pswForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"surePassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请确认新密码",autocomplete:"off"},model:{value:e.pswForm.surePassword,callback:function(t){e.$set(e.pswForm,"surePassword",t)},expression:"pswForm.surePassword"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.changePswVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditPsw("pswForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=s("VU/8")(a,l,!1,function(e){s("b430")},"data-v-04f0bb1c",null).exports,d={name:"UserListManager",data:function(){return{currentPage:1,addUserDialogFormVisible:!1,editListNameDialogVisible:!1,editListGroupDialogVisible:!1,addUserListForm:{listName:"",roleList:[]},editUserListNameForm:{groupName:"",groupId:""},editListGroupFrom:{roleList:[],groupId:"",groupName:""},userGroupParams:{pageNum:1,pageSize:10},userListRules:{listName:[{required:!0,message:"请填写用户组名称",trigger:"blur"}],roleList:[{type:"array",required:!0,message:"请至少选择一个角色",trigger:"change"}]},editUserListNameRules:{groupName:[{required:!0,message:"请填写用户组名称",trigger:"blur"}]},editListGroupRules:{roleList:[{type:"array",required:!0,message:"请至少选择一个角色",trigger:"change"}]}}},computed:{userRoleTableList:function(){return this.$store.state.userGroupTableList},roleList:function(){return this.$store.state.roleList}},methods:{init:function(){},closeDialog:function(){var e=this;o()(this.addUserListForm).forEach(function(t){e.addUserListForm[t]="roleList"==t?[]:""})},addUserDialog:function(){this.addUserDialogFormVisible=!0},handleSizeChange:function(e){this.userGroupParams.pageSize=e,console.log("每页 "+e+" 条"),this.$store.dispatch("changeUserGroupTableList",this.userGroupParams)},handleCurrentChange:function(e){this.userGroupParams.pageNum=e,this.$store.dispatch("changeUserGroupTableList",this.userGroupParams)},handleUserListName:function(e,t){this.editUserListNameForm.groupName=t.groupName,this.editUserListNameForm.groupId=t.groupId,this.editListNameDialogVisible=!0},handleUserListRole:function(e,t){t.roleId?this.editListGroupFrom.roleList=t.roleId.split(","):this.editListGroupFrom.roleList=[],this.editListGroupFrom.groupName=t.groupName,this.editListGroupFrom.groupId=t.groupId,this.editListGroupDialogVisible=!0},handleDelete:function(e,t){var s=this;this.$confirm('此操作将永久删除用户组 "'+t.groupName+'" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){s.Api.perDelUserGroup({groupId:t.groupId}).then(function(e){200==e.data.code?(s.$message({type:"success",message:"删除成功!"}),s.$store.dispatch("changeUserGroupTableList",s.userGroupParams),s.$store.dispatch("changeUserGroupList")):s.$message({type:"error",message:e.data.msg})})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},saveUserGroup:function(e){var t=this;this.Api.perSaveUserGroup(e).then(function(e){200==e.data.code?(t.$store.dispatch("changeUserGroupTableList",t.userGroupParams),t.$store.dispatch("changeUserGroupList"),t.addUserDialogFormVisible&&(t.addUserDialogFormVisible=!1),t.editListGroupDialogVisible&&(t.editListGroupDialogVisible=!1),t.$message.success("添加成功")):t.$message.error(e.data.msg)})},saveUserGroupName:function(e){var t=this;this.Api.perSaveUserGroupName(e).then(function(e){200==e.data.code?(t.$store.dispatch("changeUserGroupTableList",t.userGroupParams),t.$store.dispatch("changeUserGroupList"),t.editListNameDialogVisible&&(t.editListNameDialogVisible=!1),t.$message.success("修改成功")):t.$message.error(e.data.msg)})},submitAddUserList:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;for(var s="",r=0;r<t.addUserListForm.roleList.length;r++)s?s+=","+t.addUserListForm.roleList[r]:s=t.addUserListForm.roleList[r];var i={groupName:t.addUserListForm.listName,roleId:s};t.saveUserGroup(i)})},submitEditUserListName:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s={groupName:t.editUserListNameForm.groupName,groupId:t.editUserListNameForm.groupId};t.saveUserGroupName(s)})},submitEditRoleGroup:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;for(var s="",r=0;r<t.editListGroupFrom.roleList.length;r++)s?s+=","+t.editListGroupFrom.roleList[r]:s=t.editListGroupFrom.roleList[r];var i={groupName:t.editListGroupFrom.groupName,groupId:t.editListGroupFrom.groupId,roleId:s};t.saveUserGroup(i)})}},created:function(){this.init()}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"plugins-tips"},[e._v("\n        用户组列表\n        "),s("div",{staticClass:"add-btn",on:{click:e.addUserDialog}},[s("i",{staticClass:"el-icon-lx-roundadd"}),e._v("添加用户组\n        ")])]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userRoleTableList.list,stripe:""}},[s("el-table-column",{attrs:{prop:"date",type:"index",label:"序号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"groupName",label:"用户组名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.handleUserListName(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.handleUserListRole(t.$index,t.row)}}},[e._v("修改角色")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.userRoleTableList.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),s("el-dialog",{attrs:{title:"添加用户组",width:"40%",center:"",visible:e.addUserDialogFormVisible},on:{"update:visible":function(t){e.addUserDialogFormVisible=t},closed:e.closeDialog}},[s("el-form",{ref:"addUserListForm",attrs:{model:e.addUserListForm,rules:e.userListRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"名称",prop:"listName"}},[s("el-input",{attrs:{placeholder:"请填写用户组名称",autocomplete:"off"},model:{value:e.addUserListForm.listName,callback:function(t){e.$set(e.addUserListForm,"listName",t)},expression:"addUserListForm.listName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色",prop:"roleList"}},[s("el-checkbox-group",{model:{value:e.addUserListForm.roleList,callback:function(t){e.$set(e.addUserListForm,"roleList",t)},expression:"addUserListForm.roleList"}},e._l(e.roleList,function(t){return s("el-checkbox",{key:t.roleId,attrs:{label:t.roleId}},[e._v(e._s(t.roleName))])}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addUserDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitAddUserList("addUserListForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改用户组名称",visible:e.editListNameDialogVisible},on:{"update:visible":function(t){e.editListNameDialogVisible=t}}},[s("el-form",{ref:"editUserListNameForm",attrs:{model:e.editUserListNameForm,rules:e.editUserListNameRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"名称",prop:"groupName"}},[s("el-input",{attrs:{placeholder:"请填写用户组名称",autocomplete:"off"},model:{value:e.editUserListNameForm.groupName,callback:function(t){e.$set(e.editUserListNameForm,"groupName",t)},expression:"editUserListNameForm.groupName"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editListNameDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditUserListName("editUserListNameForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改角色",visible:e.editListGroupDialogVisible},on:{"update:visible":function(t){e.editListGroupDialogVisible=t}}},[s("el-form",{ref:"editListGroupForm",attrs:{model:e.editListGroupFrom,rules:e.editListGroupRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"名称"}},[s("el-input",{attrs:{disabled:"",placeholder:"请填写用户组名称",autocomplete:"off"},model:{value:e.editListGroupFrom.groupName,callback:function(t){e.$set(e.editListGroupFrom,"groupName",t)},expression:"editListGroupFrom.groupName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"角色",prop:"roleList"}},[s("el-checkbox-group",{model:{value:e.editListGroupFrom.roleList,callback:function(t){e.$set(e.editListGroupFrom,"roleList",t)},expression:"editListGroupFrom.roleList"}},e._l(e.roleList,function(t){return s("el-checkbox",{key:t.roleId,attrs:{label:t.roleId}},[e._v(e._s(t.roleName))])}))],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editListGroupDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditRoleGroup("editListGroupForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=s("VU/8")(d,u,!1,function(e){s("fwjw")},"data-v-0c1d0aec",null).exports,c={name:"MenuManager",data:function(){return{currentPage:1,addMenuDialogFormVisible:!1,addMenuForm:{menuName:"",menuUrl:"",pid:"-1",menuId:""},addMenuRules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],menuUrl:[{required:!0,message:"请输入菜单地址",trigger:"blur"}]}}},computed:{menuList:function(){return this.$store.state.menuList}},methods:{init:function(){},addMenuDialog:function(){this.addMenuForm.menuName="",this.addMenuForm.menuUrl="",this.addMenuDialogFormVisible=!0},handleUserList:function(e,t){console.log(e,t)},append:function(e){this.addMenuForm.pid=e.menuId,this.addMenuDialogFormVisible=!0},edit:function(e,t){console.log("+<@@@"),console.log(t),this.addMenuForm.pid=t.pid,this.addMenuForm.menuId=t.menuId,this.addMenuForm.menuName=t.menuName,this.addMenuForm.menuUrl=t.menuUrl,this.addMenuDialogFormVisible=!0},remove:function(e,t){var s=this;this.$confirm('此操作将永久删除菜单 "'+t.menuName+'" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){s.Api.perDelMenu({menuId:t.menuId}).then(function(e){200==e.data.code&&(s.$message({type:"success",message:"删除成功!"}),s.$store.dispatch("changeMenuList"),s.$store.dispatch("changeShowMenuList"))})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},saveMenuInfo:function(e){var t=this;this.Api.perSaveMenu(e).then(function(e){200==e.data.code?(t.addMenuDialogFormVisible&&(t.addMenuDialogFormVisible=!1),t.$message.success("提交成功"),t.$store.dispatch("changeMenuList")):t.$message.error(e.data.msg)})},sureAddMenu:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s={menuName:t.addMenuForm.menuName,url:t.addMenuForm.menuUrl,pid:t.addMenuForm.pid,menuId:t.addMenuForm.menuId};t.saveMenuInfo(s)})}},watch:{addMenuDialogFormVisible:function(e,t){console.log(e),e||(this.addMenuForm={menuName:"",menuUrl:"",pid:"-1",menuId:""})}},created:function(){this.init()}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"plugins-tips"},[e._v("\n        菜单列表\n        "),s("div",{staticClass:"add-btn",on:{click:e.addMenuDialog}},[s("i",{staticClass:"el-icon-lx-roundadd"}),e._v("添加菜单\n        ")])]),e._v(" "),s("el-tree",{class:"menuTree",attrs:{data:e.menuList,"node-key":"menuId","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,i=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(e._s(i.menuName))]),e._v(" "),s("span",[-1==i.pid?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(){return e.append(i)}}},[e._v("\n                添加\n              ")]):e._e(),e._v(" "),s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(){return e.edit(r,i)}}},[e._v("\n                修改\n              ")]),e._v(" "),s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){return e.remove(r,i)}}},[e._v("\n                删除\n              ")])],1)])}}])}),e._v(" "),s("el-dialog",{attrs:{title:"添加菜单",width:"40%",center:"",visible:e.addMenuDialogFormVisible},on:{"update:visible":function(t){e.addMenuDialogFormVisible=t}}},[s("el-form",{ref:"addMenuForm",attrs:{model:e.addMenuForm,rules:e.addMenuRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[s("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.addMenuForm.menuName,callback:function(t){e.$set(e.addMenuForm,"menuName",t)},expression:"addMenuForm.menuName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"菜单地址",prop:"menuUrl"}},[s("el-input",{attrs:{placeholder:"请输入菜单地址"},model:{value:e.addMenuForm.menuUrl,callback:function(t){e.$set(e.addMenuForm,"menuUrl",t)},expression:"addMenuForm.menuUrl"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addMenuDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sureAddMenu("addMenuForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=s("VU/8")(c,p,!1,function(e){s("GE4d"),s("a2/v")},"data-v-8c18d870",null).exports,h={name:"RoleSetting",data:function(){return{checkAll:!0,isError:!1,defaultProps:{children:"children",label:"menuName"},currentPage:1,addRoleDialogFormVisible:!1,editRoleNameDialogFormVisible:!1,editRoleMenuDialogFormVisible:!1,addRoleForm:{roleName:""},editRoleNameForm:{roleName:"",roleId:""},editRoleMenuForm:{menuList:[],roleName:"",roleId:""},addRoleRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"}]},editRoleNameRules:{roleName:[{required:!0,message:"请输入角色名",trigger:"blur"}]},roleParams:{pageSize:"10",pageNum:"1"}}},computed:{menuList:function(){return this.$store.state.menuList},roleTableList:function(){return this.$store.state.roleTableList}},methods:{init:function(){},clickNode:function(){var e=this.$refs.menu.getCheckedKeys();e&&e.length<=0?this.isError=!0:e&&e.length>0&&(this.isError=!1)},addRoleDialog:function(){this.addRoleDialogFormVisible=!0,this.addRoleForm.roleName=""},handleSizeChange:function(e){this.roleParams.pageSize=e,this.$store.dispatch("changeRoleTableList",this.roleParams)},handleCurrentChange:function(e){this.roleParams.pageNum=e,this.$store.dispatch("changeRoleTableList",this.roleParams)},handleRoleName:function(e,t){this.editRoleNameDialogFormVisible=!0,this.editRoleNameForm.roleName=t.roleName,this.editRoleNameForm.roleId=t.roleId},handleRoleMenu:function(e,t){var s=this;this.editRoleMenuDialogFormVisible=!0,this.editRoleMenuForm.roleName=t.roleName,this.editRoleMenuForm.roleId=t.roleId,t.menuId?this.editRoleMenuForm.menuList=t.menuId.split(","):this.editRoleMenuForm.menuList=[],setTimeout(function(){s.$refs.menu.setCheckedKeys(s.editRoleMenuForm.menuList)})},handleRoleDelete:function(e,t){var s=this;this.$confirm('此操作将永久删除角色 "'+t.roleName+'" 是否继续?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(function(){s.Api.perDelRole({roleId:t.roleId}).then(function(e){200==e.data.code?(s.$message({type:"success",message:"删除成功!"}),s.$store.dispatch("changeRoleTableList",s.roleParams),s.$store.dispatch("changeRoleList")):s.$message({type:"error",message:e.data.msg})})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},addRole:function(e){var t=this;this.Api.perSaveRole(e).then(function(e){200==e.data.code?(t.$store.dispatch("changeRoleTableList",t.roleParams),t.$store.dispatch("changeRoleList"),t.addRoleDialogFormVisible&&(t.addRoleDialogFormVisible=!1),t.editRoleNameDialogFormVisible&&(t.editRoleNameDialogFormVisible=!1),t.$message.success("提交成功")):t.$message.error(e.data.msg)})},submitRoleAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s={roleName:t.addRoleForm.roleName};t.addRole(s)})},submitRoleNameEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var s=t.editRoleNameForm;t.addRole(s)})},submitRoleMenuEdit:function(){var e,t=this,s=this.$refs.menu.getCheckedKeys(),r=void 0;console.log(s);for(var i=0;i<s.length;i++)r?r+=","+s[i]:r=s[i];e={roleId:this.editRoleMenuForm.roleId,menuId:r},s&&0!=s.length?this.Api.perSaveMenuRoleRel(e).then(function(e){200==e.data.code?(t.$store.dispatch("changeRoleTableList",t.roleParams),t.$store.dispatch("changeRoleList"),t.editRoleMenuDialogFormVisible=!1,t.$message({type:"success",message:"设置成功!"}),t.$store.dispatch("changeShowMenuList")):t.$message.error(e.data.msg)}):this.isError=!0}},created:function(){this.init()},watch:{}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"plugins-tips"},[e._v("\n        角色列表\n        "),s("div",{staticClass:"add-btn",on:{click:e.addRoleDialog}},[s("i",{staticClass:"el-icon-lx-roundadd"}),e._v("添加角色\n        ")])]),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleTableList.list,stripe:""}},[s("el-table-column",{attrs:{prop:"date",type:"index",label:"序号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.handleRoleName(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.handleRoleMenu(t.$index,t.row)}}},[e._v("修改菜单")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.handleRoleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.roleTableList.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),s("el-dialog",{attrs:{title:"添加角色",width:"40%",center:"",visible:e.addRoleDialogFormVisible},on:{"update:visible":function(t){e.addRoleDialogFormVisible=t}}},[s("el-form",{ref:"addRoleForm",attrs:{model:e.addRoleForm,rules:e.addRoleRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"角色名",prop:"roleName"}},[s("el-input",{attrs:{placeholder:"请填写用户名",autocomplete:"off"},model:{value:e.addRoleForm.roleName,callback:function(t){e.$set(e.addRoleForm,"roleName",t)},expression:"addRoleForm.roleName"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.addRoleDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRoleAdd("addRoleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"编辑角色",width:"40%",center:"",visible:e.editRoleNameDialogFormVisible},on:{"update:visible":function(t){e.editRoleNameDialogFormVisible=t}}},[s("el-form",{ref:"editRoleNameForm",attrs:{model:e.editRoleNameForm,rules:e.editRoleNameRules,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"角色名",prop:"roleName"}},[s("el-input",{attrs:{placeholder:"请填写角色名",autocomplete:"off"},model:{value:e.editRoleNameForm.roleName,callback:function(t){e.$set(e.editRoleNameForm,"roleName",t)},expression:"editRoleNameForm.roleName"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editRoleNameDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRoleNameEdit("editRoleNameForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改菜单",width:"40%",center:"",visible:e.editRoleMenuDialogFormVisible},on:{"update:visible":function(t){e.editRoleMenuDialogFormVisible=t}}},[s("el-form",{ref:"editRoleMenuForm",attrs:{model:e.editRoleMenuForm,"label-width":"100px",size:"mini"}},[s("el-form-item",{attrs:{label:"角色名",prop:"roleName"}},[s("el-input",{attrs:{disabled:"",placeholder:"请填写角色名",autocomplete:"off"},model:{value:e.editRoleMenuForm.roleName,callback:function(t){e.$set(e.editRoleMenuForm,"roleName",t)},expression:"editRoleMenuForm.roleName"}})],1),e._v(" "),e.menuList[0]?s("el-form-item",{attrs:{label:"菜单权限",required:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.menuList[0].createTime,expression:" menuList[0].createTime"}],attrs:{type:"hidden"},domProps:{value:e.menuList[0].createTime},on:{input:function(t){t.target.composing||e.$set(e.menuList[0],"createTime",t.target.value)}}}),e._v(" "),[s("el-tree",{ref:"menu",attrs:{data:e.menuList,"show-checkbox":"","node-key":"menuId","default-expand-all":"","check-strictly":e.checkAll,props:e.defaultProps},on:{check:e.clickNode}}),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isError,expression:"isError"}],staticClass:"err-msg"},[e._v("\n                        请至少选择一个菜单\n                    ")])]],2):e._e()],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editRoleMenuDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRoleMenuEdit("editRoleMenuForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var b=s("VU/8")(h,f,!1,function(e){s("3v2M")},"data-v-1692819e",null).exports,v={name:"SetPermission",data:function(){return{content:"",editorOption:{placeholder:"Hello World"},selectTab:"用户管理",activeName:"first",tableData:{},userRoleList:[],userRoleTableList:[],menu:[]}},components:{quillEditor:r.quillEditor,vUserManager:n,vUserListManager:m,vMenuManager:g,vRoleSetting:b},methods:{handleClick:function(e,t){console.log(e.name),this.selectTab=e.label},onEditorChange:function(e){e.editor;var t=e.html;e.text;this.content=t},handleAvatarSuccess:function(e){console.log(e)}},created:function(){this.$store.dispatch("changeMenuList"),this.$store.dispatch("changeRoleList");this.$store.dispatch("changeRoleTableList",{pageNum:1,pageSize:10}),this.$store.dispatch("changeUserGroupList");this.$store.dispatch("changeUserGroupTableList",{pageNum:1,pageSize:10});this.$store.dispatch("changeUserList",{pageNum:1,pageSize:10})}},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"container"},[s("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[s("v-userManager")],1),e._v(" "),s("el-tab-pane",{attrs:{label:"用户组管理",name:"second"}},[s("v-user-list-manager")],1),e._v(" "),s("el-tab-pane",{attrs:{label:"角色管理",name:"third"}},[s("v-role-setting")],1),e._v(" "),s("el-tab-pane",{attrs:{label:"菜单",name:"fourth"}},[s("v-menu-manager")],1)],1)],1)])},staticRenderFns:[]};var L=s("VU/8")(v,F,!1,function(e){s("kvi1"),s("aneU")},"data-v-120e5628",null);t.default=L.exports},kvi1:function(e,t){}});